import{u as x,d as b,c as f,b as p,r as i,j as e}from"./index--dANjx75.js";import{b as g,u as y}from"./clientService-D0rezJXS.js";import"./api-CLE4YwRs.js";const _=()=>{const{t}=x(),{id:o}=b(),c=f(),{user:s}=p(),[a,r]=i.useState(null),[d,l]=i.useState(!1);i.useEffect(()=>{u()},[o]);const u=async()=>{try{const n=await g(o);r(n)}catch(n){console.error(t("error_fetching_client"),n)}},m=async n=>{if(n.preventDefault(),(s==null?void 0:s.role)!=="admin"){alert(t("admin_update_alert"));return}try{await y(o,a),l(!1),alert(t("client_update_success"))}catch(h){console.error(t("error_updating_client"),h),alert(t("client_update_failed"))}};return a?e.jsxs("div",{className:"max-w-2xl mx-auto mt-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:t("client_details")}),d?e.jsxs("form",{onSubmit:m,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"name",children:t("name")}),e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"name",type:"text",value:a.name,onChange:n=>r({...a,name:n.target.value})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"submit",children:t("save_changes")}),e.jsx("button",{className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"button",onClick:()=>l(!1),children:t("cancel")})]})]}):e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsxs("strong",{children:[t("name"),":"]})," ",a.name]}),(s==null?void 0:s.role)==="admin"&&e.jsx("button",{className:"mt-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",onClick:()=>l(!0),children:t("edit")})]}),e.jsx("button",{className:"mt-4 bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",onClick:()=>c("/clients"),children:t("back_to_clients")})]}):e.jsx("div",{children:t("loading")})};export{_ as default};
