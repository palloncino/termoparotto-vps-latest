import{u as f,c as j,d as v,b as w,r as i,j as e}from"./index-DAlyebKm.js";import{b as _,u as y}from"./productsService-DIWH66IR.js";import"./api-0awuLtFQ.js";const E=()=>{const{t:n}=f(),{id:c}=j(),h=v(),{user:s}=w(),[r,l]=i.useState(null),[u,d]=i.useState(!1);i.useEffect(()=>{g()},[c]);const g=async()=>{try{const t=await _(c);l(t)}catch(t){console.error(n("error_fetching_product"),t)}},x=async t=>{if(t.preventDefault(),(s==null?void 0:s.role)!=="admin"){alert(n("admin_update_alert"));return}try{await y(c,r),d(!1),alert(n("product_update_success"))}catch(o){console.error(n("error_updating_product"),o),alert(n("product_update_failed"))}},p=t=>{const{name:o,value:m}=t.target;l(b=>({...b,[o]:o.includes("price")||o==="discount"||o==="markup"?parseFloat(m):m}))};if(!r)return e.jsx("div",{className:"text-center mt-8",children:n("loading")});const a=(t,o="text")=>e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:t,children:n(t)}),u?o==="select"?e.jsxs("select",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:t,name:t,value:r[t],onChange:p,children:[e.jsx("option",{value:"product",children:n("product")}),e.jsx("option",{value:"material",children:n("material")})]}):e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:t,name:t,type:o,value:r[t],onChange:p,step:o==="number"?"0.01":void 0}):e.jsx("p",{className:"py-2 px-3 bg-gray-100 rounded",children:o==="number"?r[t].toFixed(2):r[t]})]});return e.jsxs("div",{className:"max-w-3xl mx-auto mt-8 p-6 bg-white rounded-lg shadow-lg",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6 text-gray-800",children:n("product_details")}),e.jsxs("form",{onSubmit:x,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a("name"),a("type","select"),a("category"),a("list_price","number"),a("discount","number"),a("net_price","number"),a("markup","number"),a("sale_price","number")]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[u?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition duration-300",type:"submit",children:n("save_changes")}),e.jsx("button",{className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition duration-300",type:"button",onClick:()=>d(!1),children:n("cancel")})]}):(s==null?void 0:s.role)==="admin"&&e.jsx("button",{className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition duration-300",type:"button",onClick:()=>d(!0),children:n("edit")}),e.jsx("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition duration-300",type:"button",onClick:()=>h("/products"),children:n("back_to_products")})]})]})]})};export{E as default};
