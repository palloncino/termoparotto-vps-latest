import{u as f,i as _,h as j,g as w,r as c,j as e}from"./index-thHJPYf9.js";import{e as v,u as y}from"./productsService-DJ1x3sK0.js";import"./api-B396KAwJ.js";const E=()=>{const{t:n}=f(),{id:i}=_(),h=j(),{user:r}=w(),[s,d]=c.useState(null),[l,u]=c.useState(!1);c.useEffect(()=>{g()},[i]);const g=async()=>{try{const t=await v(i);d(t)}catch(t){console.error(n("error_fetching_product"),t)}},x=async t=>{if(t.preventDefault(),(r==null?void 0:r.role)!=="admin"){alert(n("admin_update_alert"));return}try{await y(i,s),u(!1),alert(n("product_update_success"))}catch(a){console.error(n("error_updating_product"),a),alert(n("product_update_failed"))}},p=t=>{const{name:a,value:m}=t.target;d(b=>({...b,[a]:a.includes("price")||a==="discount"||a==="markup"?parseFloat(m):m}))};if(!s)return e.jsx("div",{className:"text-center mt-8",children:n("loading")});const o=(t,a="text")=>e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:t,children:n(t)}),l?a==="select"?e.jsxs("select",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:t,name:t,value:s[t],onChange:p,children:[e.jsx("option",{value:"product",children:n("product")}),e.jsx("option",{value:"material",children:n("material")})]}):e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:t,name:t,type:a,value:s[t],onChange:p,step:a==="number"?"0.01":void 0}):e.jsx("p",{className:"py-2 px-3 bg-gray-100 rounded",children:a==="number"?s[t].toFixed(2):s[t]})]});return e.jsxs("div",{className:"max-w-3xl mx-auto mt-8 p-6 bg-white rounded-lg shadow-lg",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6 text-gray-800",children:n("product_details")}),e.jsxs("form",{onSubmit:x,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o("item_code"),o("supplier_item_code"),o("item_description"),o("diameter","number"),o("length_mm","number"),o("unit_price_list","number"),o("unit_price_first_discount","number"),o("unit_price_net","number"),o("unit_price_markup","number"),o("unit_price_taxable","number"),o("unit_price_sale","number"),o("type","select")]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[l?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition duration-300",type:"submit",children:n("save_changes")}),e.jsx("button",{className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition duration-300",type:"button",onClick:()=>u(!1),children:n("cancel")})]}):(r==null?void 0:r.role)==="admin"&&e.jsx("button",{className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition duration-300",type:"button",onClick:()=>u(!0),children:n("edit")}),e.jsx("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition duration-300",type:"button",onClick:()=>h("/products"),children:n("back_to_products")})]})]})]})};export{E as default};
