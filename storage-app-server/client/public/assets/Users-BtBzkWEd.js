import{u as m,r as l,j as e,b as g,L as j,e as y}from"./index-DFnUBA3S.js";import{P as f}from"./Pagination-CX6Oewqi.js";import{a as b}from"./usersService-D84MQp6X.js";import"./api-CLE4YwRs.js";const N=({onFilterChange:i})=>{const{t:s}=m(),[r,t]=l.useState(""),[o,c]=l.useState(""),[d,x]=l.useState(""),p=a=>{a.preventDefault(),i({name:r,email:o,role:d})};return e.jsx("form",{onSubmit:p,className:"mb-4",children:e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("input",{type:"text",placeholder:s("filter_by_name"),value:r,onChange:a=>t(a.target.value),className:"border rounded px-2 py-1"}),e.jsx("input",{type:"text",placeholder:s("filter_by_email"),value:o,onChange:a=>c(a.target.value),className:"border rounded px-2 py-1"}),e.jsxs("select",{value:d,onChange:a=>x(a.target.value),className:"border rounded px-2 py-1",children:[e.jsx("option",{value:"",children:s("all_roles")}),e.jsx("option",{value:"admin",children:s("admin")}),e.jsx("option",{value:"user",children:s("user")})]}),e.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-1 rounded",children:s("apply_filters")})]})})},v=({users:i})=>{const{t:s}=m(),{user:r}=g();return e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s("name")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s("email")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s("role")})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(r==null?void 0:r.role)==="admin"?e.jsx(j,{to:`/users/${t._id}`,className:"text-indigo-600 hover:text-indigo-900",children:t.name}):e.jsx("span",{children:t.name})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.email}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.role})]},t._id))})]})},C=()=>{const{t:i}=m(),{showFlashMessage:s}=y(),[r,t]=l.useState([]),[o,c]=l.useState(1),[d,x]=l.useState(1),[p,a]=l.useState({name:"",email:"",role:""});l.useEffect(()=>{u()},[]);const u=async()=>{try{const n=await b(o,p);t(n.users),x(n.totalPages)}catch(n){s(typeof n=="string"?n:n.message,"error")}},h=n=>{a(n),c(1)};return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:i("users")}),e.jsx(N,{onFilterChange:h}),e.jsx(v,{users:r}),e.jsx(f,{currentPage:o,totalPages:d,onPageChange:c})]})};export{C as default};
