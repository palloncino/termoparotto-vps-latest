import{u as x,d as b,c as f,b as g,r as i,j as e,a as p}from"./index-DFnUBA3S.js";import{b as j,u as y}from"./usersService-D84MQp6X.js";import"./api-CLE4YwRs.js";const _=()=>{const{t:s}=x(),{id:l}=b(),d=f(),{user:o}=g(),[t,n]=i.useState(null),[u,r]=i.useState(!1);i.useEffect(()=>{c()},[l]);const c=async()=>{try{const a=await j(l);n(a)}catch(a){console.error(s("error_fetching_user"),a)}},m=async a=>{if(a.preventDefault(),(o==null?void 0:o.role)!=="admin"){alert(s("admin_only_message"));return}try{await y(l,t),r(!1),alert(s("user_updated_successfully"))}catch(h){console.error(s("error_updating_user"),h),alert(s("failed_to_update_user"))}};return t?e.jsxs("div",{className:"max-w-2xl mx-auto mt-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:s("user_details")}),u?e.jsxs("form",{onSubmit:m,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"name",children:s("name")}),e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"name",type:"text",value:t.name,onChange:a=>n({...t,name:a.target.value})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"email",children:s("email")}),e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"email",type:"email",value:t.email,onChange:a=>n({...t,email:a.target.value})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"role",children:s("role")}),e.jsxs("select",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"role",value:t.role,onChange:a=>n({...t,role:a.target.value}),children:[e.jsx("option",{value:"user",children:s("user")}),e.jsx("option",{value:"admin",children:s("admin")})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"submit",children:s("save_changes")}),e.jsx("button",{className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"button",onClick:()=>r(!1),children:s("cancel")})]})]}):e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsxs("strong",{children:[s("name"),":"]})," ",t.name]}),e.jsxs("p",{children:[e.jsxs("strong",{children:[s("email"),":"]})," ",t.email]}),e.jsxs("p",{children:[e.jsxs("strong",{children:[s("role"),":"]})," ",t.role]}),(o==null?void 0:o.role)==="admin"&&e.jsx("button",{className:"mt-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",onClick:()=>r(!0),children:s("edit")})]}),e.jsx("button",{className:"mt-4 bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",onClick:()=>d("/users"),children:s("back_to_users")})]}):e.jsx(p,{})};export{_ as default};
