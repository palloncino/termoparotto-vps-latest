import{u as l,j as e,F as R,L as d,a as g,b as i,c as F,d as E,e as L,f as U,g as A,r as a,h as $}from"./index-BL79QhDQ.js";import{g as z}from"./clientService-DWml5I6n.js";import{g as I}from"./usersService-BCTf9RTI.js";import{g as T}from"./productsService-DJ1x3sK0.js";import{g as B}from"./worksiteService-Bsvx2crQ.js";import{g as D}from"./reportService-C5rT5Bns.js";import"./api-B396KAwJ.js";const q=({clientsCount:s})=>{const{t}=l();return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"rounded-full p-3 bg-blue-500 text-white mr-4",children:e.jsx(R,{size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:t("clients_information")}),e.jsx("p",{className:"text-3xl font-bold",children:s})]})]}),e.jsxs(d,{to:"/clients",className:"mt-4 inline-flex items-center text-blue-600 hover:text-blue-800",children:[t("view_all_clients"),e.jsx(g,{className:"ml-2"})]})]})},G=({usersStats:s})=>{const{t}=l();return s?e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800",children:t("user_statistics")}),e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:t("admins")}),e.jsx("p",{className:"text-lg font-semibold",children:s.adminCount})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:t("users")}),e.jsx("p",{className:"text-lg font-semibold",children:s.userCount})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:"bg-blue-500 h-2.5 rounded-full",style:{width:`${s.adminPercentage}%`}})}),e.jsxs("div",{className:"flex justify-between mt-2 text-sm text-gray-600",children:[e.jsxs("span",{children:[t("admins"),": ",s.adminPercentage,"%"]}),e.jsxs("span",{children:[t("users"),": ",s.userPercentage,"%"]})]})]}):e.jsx(i,{})},H=({productsStats:s})=>{const{t}=l();return s?e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800",children:t("product_statistics")}),e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:t("materials")}),e.jsx("p",{className:"text-lg font-semibold",children:s.materialCount})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:t("products")}),e.jsx("p",{className:"text-lg font-semibold",children:s.productCount})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:"bg-purple-500 h-2.5 rounded-full",style:{width:`${s.materialPercentage}%`}})}),e.jsxs("div",{className:"flex justify-between mt-2 text-sm text-gray-600",children:[e.jsxs("span",{children:[t("materials"),": ",s.materialPercentage,"%"]}),e.jsxs("span",{children:[t("products"),": ",s.productPercentage,"%"]})]})]}):e.jsx(i,{})},J=({stats:s})=>{const{t}=l();return e.jsxs("div",{className:"bg-white shadow-lg rounded-lg p-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:t("worksite_statistics")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx(o,{icon:F,color:"blue",label:t("total_worksites"),value:s.totalWorksites}),e.jsx(o,{icon:E,color:"green",label:t("active_worksites"),value:s.activeWorksites}),e.jsx(o,{icon:L,color:"red",label:t("inactive_worksites"),value:s.inactiveWorksites})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx(d,{to:"/worksites",className:"text-blue-600 hover:text-blue-800 font-semibold",children:t("view_all_worksites")})})]})},o=({icon:s,color:t,label:n,value:c})=>e.jsxs("div",{className:"flex items-center bg-gray-100 p-4 rounded-lg shadow-sm",children:[e.jsx("div",{className:`flex-shrink-0 bg-${t}-500 rounded-full p-3 mr-4`,children:e.jsx(s,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-800",children:n}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c})]})]}),K=({reportStats:s})=>{const{t}=l();return s?e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"rounded-full p-3 bg-indigo-500 text-white mr-4",children:e.jsx(U,{size:24})}),e.jsx("div",{children:e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:t("report_statistics")})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:t("total_reports")}),e.jsx("p",{className:"text-2xl font-semibold",children:s.totalReports})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:t("pending_reports")}),e.jsx("p",{className:"text-2xl font-semibold",children:s.pendingReports})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:t("completed_reports")}),e.jsx("p",{className:"text-2xl font-semibold",children:s.completedReports})]})]}),e.jsxs(d,{to:"/reports",className:"mt-4 inline-flex items-center text-indigo-600 hover:text-indigo-800",children:[t("view_all_reports"),e.jsx(g,{className:"ml-2"})]})]}):e.jsx(i,{})},ee=()=>{const{t:s}=l(),{user:t}=A(),[n,c]=a.useState(0),u=$(),[j,p]=a.useState({total:0,adminCount:0,userCount:0,adminPercentage:0,userPercentage:0}),[f,b]=a.useState({total:0,materialCount:0,productCount:0,materialPercentage:0,productPercentage:0}),[N,v]=a.useState({totalWorksites:0,activeWorksites:0,inactiveWorksites:0}),[w,y]=a.useState(null),[_,x]=a.useState(!0),[m,h]=a.useState(null);a.useEffect(()=>{t?(k(),C(),S()):u("login")},[]);const k=async()=>{try{const{count:r}=await z(),P=await I(),W=await T();c(r),p(P),b(W)}catch(r){console.error(s("error_fetching_stats"),r)}},C=async()=>{x(!0);try{const r=await B();v(r),h(null)}catch(r){h(s("error_fetching_worksite_stats")),console.error(s("error_fetching_worksite_stats"),r)}finally{x(!1)}},S=async()=>{try{const r=await D();y(r)}catch(r){console.error("Error fetching report stats:",r)}};return _?e.jsx(i,{}):m?e.jsxs("div",{children:[s("error"),": ",m]}):e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:s("dashboard")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(K,{reportStats:w}),e.jsx(H,{productsStats:f}),e.jsx(q,{clientsCount:n}),e.jsx(G,{usersStats:j}),e.jsx(J,{stats:N})]})]})};export{ee as default};
