import{a as s}from"./api-BqC8VQ1e.js";const m=async(e,t)=>(await s.get("/products",{params:{page:e,limit:200,...t}})).data,w=async e=>{try{return(await s.get(`/products/${e}`)).data}catch(t){throw console.error("Error in getProduct:",t),t}},y=async e=>(await s.post("/products",e)).data,v=async(e,t)=>(await s.put(`/products/${e}`,t)).data,C=async e=>(await s.delete(`/products/${e}`)).data,E=async()=>{try{const e=await s.get("/products",{params:{page:1,limit:1e3}}),t=e.data.products||e.data.data||[],o=t.length,c=t.reduce((r,n)=>{const d=n.fornitore||"Unknown";return r[d]=(r[d]||0)+1,r},{}),u=Object.entries(c).sort(([,r],[,n])=>n-r).slice(0,5).map(([r,n])=>({supplier:r,count:n})),a=t.map(r=>r.prezzo_acquisto||0).filter(r=>r>0),l=a.length>0?a.reduce((r,n)=>r+n,0)/a.length:0,g=a.length>0?Math.max(...a):0,P=a.length>0?Math.min(...a):0,p=t.filter(r=>r.iva_10>0).length,i=t.filter(r=>r.iva_22>0).length;return{total:o,supplierCount:Object.keys(c).length,topSuppliers:u,averagePrice:Math.round(l*100)/100,maxPrice:Math.round(g*100)/100,minPrice:Math.round(P*100)/100,vat10Count:p,vat22Count:i,vat10Percentage:o>0?Math.round(p/o*100):0,vat22Percentage:o>0?Math.round(i/o*100):0,materialCount:0,productCount:o,materialPercentage:0,productPercentage:o>0?100:0}}catch(e){return console.error("Error getting products stats:",e),{total:0,supplierCount:0,topSuppliers:[],averagePrice:0,maxPrice:0,minPrice:0,vat10Count:0,vat22Count:0,vat10Percentage:0,vat22Percentage:0,materialCount:0,productCount:0,materialPercentage:0,productPercentage:0}}},M=async e=>{try{let o=0;for(;o<3;)try{return(await s.post("/products/import",{products:e},{timeout:6e4,headers:{"Content-Type":"application/json","X-Chunk-Size":e.length.toString()}})).data}catch(c){if(o++,o===3)throw c;await new Promise(u=>setTimeout(u,1e3*o))}}catch(t){throw console.error("Error in importProducts:",t),t}},S=async e=>{try{return(await s.post("/products/bulk-delete",{ids:e})).data}catch(t){throw console.error("Error in deleteProducts:",t),t}};export{m as a,S as b,y as c,C as d,w as e,E as g,M as i,v as u};
