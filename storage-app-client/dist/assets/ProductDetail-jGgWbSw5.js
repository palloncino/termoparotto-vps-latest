import{u as f,a as _,j as e}from"./index-DSTbHML1.js";import{r as u}from"./vendor-8AKiDlQN.js";import{e as v,u as j}from"./productsService-BwLSiUTT.js";import{c as w,u as N}from"./router-BmsaeIqg.js";import"./api-BqC8VQ1e.js";const F=()=>{const{t}=f(),{id:r}=w(),h=N(),{user:s}=_(),[a,d]=u.useState(null),[c,l]=u.useState(!1);u.useEffect(()=>{x()},[r]);const x=async()=>{try{const n=await v(r);d(n)}catch(n){console.error(t("error_fetching_product"),n)}},g=async n=>{if(n.preventDefault(),(s==null?void 0:s.role)!=="admin"){alert(t("admin_update_alert"));return}try{await j(r,a),l(!1),alert(t("product_update_success"))}catch(o){console.error(t("error_updating_product"),o),alert(t("product_update_failed"))}},m=n=>{const{name:o,value:p}=n.target;d(b=>({...b,[o]:o.includes("prezzo")||o.includes("utile")||o.includes("imponibile")||o.includes("iva")?parseFloat(p):p}))};if(!a)return e.jsx("div",{className:"text-center mt-8",children:t("loading")});const i=(n,o="text")=>e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:n,children:t(n)}),c?o==="select"&&n==="unit_of_measure"?e.jsxs("select",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:n,name:n,value:a[n],onChange:m,children:[e.jsx("option",{value:"pz",children:t("unit_pz")}),e.jsx("option",{value:"kg",children:t("unit_kg")}),e.jsx("option",{value:"m",children:t("unit_m")}),e.jsx("option",{value:"l",children:t("unit_l")}),e.jsx("option",{value:"m²",children:t("unit_m2")}),e.jsx("option",{value:"m³",children:t("unit_m3")}),e.jsx("option",{value:"cm",children:t("unit_cm")}),e.jsx("option",{value:"mm",children:t("unit_mm")}),e.jsx("option",{value:"km",children:t("unit_km")}),e.jsx("option",{value:"g",children:t("unit_g")}),e.jsx("option",{value:"t",children:t("unit_t")}),e.jsx("option",{value:"ml",children:t("unit_ml")}),e.jsx("option",{value:"cl",children:t("unit_cl")}),e.jsx("option",{value:"dl",children:t("unit_dl")})]}):e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:n,name:n,type:o,value:a[n],onChange:m,step:o==="number"?"0.01":void 0}):e.jsx("p",{className:"py-2 px-3 bg-gray-100 rounded",children:o==="number"?a[n].toFixed(2):n==="unit_of_measure"?t(`unit_${a[n]}`):a[n]})]});return e.jsxs("div",{className:"max-w-3xl mx-auto mt-8 p-6 bg-white rounded-lg shadow-lg",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6 text-gray-800",children:t("product_details")}),e.jsxs("form",{onSubmit:g,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i("data_documento"),i("fornitore"),i("unit_of_measure","select"),i("descrizione"),i("descrizione_interna"),i("prezzo_acquisto","number"),i("utile","number"),i("imponibile","number"),i("iva_10","number"),i("iva_22","number")]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[c?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition duration-300",type:"submit",children:t("save_changes")}),e.jsx("button",{className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition duration-300",type:"button",onClick:()=>l(!1),children:t("cancel")})]}):(s==null?void 0:s.role)==="admin"&&e.jsx("button",{className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition duration-300",type:"button",onClick:()=>l(!0),children:t("edit")}),e.jsx("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition duration-300",type:"button",onClick:()=>h("/products"),children:t("back_to_products")})]})]})]})};export{F as default};
