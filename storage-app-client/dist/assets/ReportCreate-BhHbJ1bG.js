import{u as y,j as e,e as b,b as V,p as q,q as f,r as z,s as X,t as G,v as J}from"./index-BT8qgM4o.js";import{r as d}from"./vendor-8AKiDlQN.js";import{u as K}from"./ReportDetails-Bq0aOBoj.js";import{T as j}from"./Tooltip-rScwkKB4.js";import{R as O,A as Q,P as U}from"./ReportHeader-9Ug3qBhk.js";import{u as W}from"./router-BmsaeIqg.js";import"./clientService-sudZ8bLR.js";import"./api-CZ7u_KBj.js";import"./productsService-B7aw_y5K.js";import"./reportService-B371uuyd.js";import"./usersService-CqhLcM0Y.js";import"./worksiteService-BcbmFES_.js";import"./formatDate-Dk0xWO1M.js";const Y=()=>{var u,v,g;const{t}=y(),{formData:a,clients:N,worksites:w,products:k,users:o,handleHeaderChange:C,handleActivityChange:_,handleSubmit:A,appendActivity:F,removeActivity:m,appendTask:R,removeTask:P,appendMaterial:T,removeMaterial:S,validateForm:D}=K(),[M,x]=d.useState(!1),[B,Z]=d.useState(!0),[l,h]=d.useState(0),$=d.useRef([]),E=()=>{x(!0)},p=(u=a.activities)==null?void 0:u[l],I=p?p.tasks.length:0,L=r=>{h(r)},H=e.jsxs("div",{"data-testid":"fixed-preview-banner",className:`fixed bottom-4 left-4 bg-white border border-gray-200 rounded-lg shadow-lg p-4 z-50 ${B?"":"hidden"}`,children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:e.jsx(b,{className:"text-lg text-blue-600"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-gray-800","data-testid":"current-activity-text",children:[t("current_activity","Current Activity"),": ",l+1]}),e.jsxs("p",{className:"text-xs text-gray-600",children:[t("tasks_completed","Tasks"),": ",I]})]})]}),e.jsx("div",{children:e.jsx(j,{content:t("preview_report_tooltip"),children:e.jsxs("button",{type:"button","data-testid":"preview-button",className:"inline-flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-md transition-colors duration-200 shadow-sm hover:shadow-md",onClick:E,children:[e.jsx(V,{className:"text-sm"}),e.jsx("span",{children:t("preview")})]})})})]});return e.jsxs("form",{onSubmit:A,className:"grid grid-cols-1 gap-8",children:[e.jsx("section",{className:"w-full",children:e.jsx(O,{formData:a.header,users:o,handleChange:C})}),e.jsx("section",{className:"w-full",children:e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 border-b border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:e.jsx(q,{className:"text-lg text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:t("activities")}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t("manage_your_activities","Manage your work activities and tasks")})]})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs("button",{type:"button","data-testid":"add-activity-button",className:"inline-flex items-center space-x-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white font-medium rounded-md transition-colors duration-200",onClick:()=>{F(),setTimeout(()=>{var r;h(((r=a.activities)==null?void 0:r.length)||0)},0)},children:[e.jsx(f,{className:"text-sm"}),e.jsx("span",{children:t("add_activity")})]})})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(b,{className:"text-lg text-gray-600"}),e.jsx("h3",{className:"text-base font-medium text-gray-700",children:t("activity_navigation","Activity Navigation")})]}),e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:(v=a.activities)==null?void 0:v.map((r,s)=>e.jsxs("button",{type:"button","data-testid":`activity-pill-${s+1}`,className:`px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 ${s===l?"bg-blue-600 text-white shadow-sm":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 hover:border-gray-400"}`,onClick:()=>L(s),children:[t("activity")," ",s+1]},s))})]}),e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:e.jsx("div",{className:"overflow-hidden",children:e.jsx("div",{className:"flex transition-transform duration-300 ease-in-out",style:{transform:`translateX(-${l*100}%)`},children:(g=a.activities)==null?void 0:g.map((r,s)=>e.jsx("div",{className:"w-full flex-shrink-0",ref:i=>$.current[s]=i,children:e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:[t("activity")," ",s+1]}),a.activities&&a.activities.length>1&&e.jsx("button",{type:"button",onClick:()=>m(s),className:"text-red-600 hover:text-red-800 text-sm font-medium hover:underline",children:t("remove_activity")})]}),e.jsx(Q,{activity:r,index:s,clients:N,worksites:w,products:k,users:o,handleActivityChange:(i,n,c)=>{_(i,n,c)},removeActivity:m,appendTask:(i,n)=>{i.preventDefault(),R(n)},removeTask:P,appendMaterial:(i,n,c)=>{i.preventDefault(),T(n,c)},removeMaterial:S})]})},s))})})})]})]})})}),e.jsx("section",{className:"bg-white border border-gray-200 rounded-lg shadow-sm p-6",children:e.jsx("div",{className:"flex justify-end",children:e.jsx(j,{content:t("submit_report_tooltip"),children:e.jsxs("button",{type:"submit","data-testid":"create-report-submit-button",className:"inline-flex items-center space-x-2 px-6 py-3 bg-green-600 hover:bg-green-700 text-white font-medium rounded-md transition-colors duration-200",children:[e.jsx(z,{className:"text-sm"}),e.jsx("span",{children:t("submit")})]})})})}),M&&e.jsx(U,{report:a,onClose:()=>x(!1),validateForm:D}),H]})},he=()=>{const{t}=y(),a=W();return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm p-6 mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:e.jsx(f,{className:"text-2xl text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:t("create_report")}),e.jsx("p",{className:"text-gray-600 mt-1",children:t("create_new_report_description","Create a new work report with activities and tasks")})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:e.jsx(X,{className:"text-lg text-green-600"})}),e.jsx("span",{className:"text-sm font-medium text-green-700",children:"Active Form"})]})]})}),e.jsx("div",{className:"mb-6",children:e.jsxs("button",{onClick:()=>a("/report-list"),className:"inline-flex items-center space-x-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 hover:border-gray-400 transition-colors duration-200",children:[e.jsx(G,{className:"text-sm"}),e.jsx("span",{className:"font-medium",children:t("back_to_list")})]})}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 border-b border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(J,{className:"text-lg text-gray-600"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:t("report_form","Report Form")}),e.jsx("div",{className:"ml-auto",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:t("draft_mode","Draft Mode")})})]})}),e.jsx("div",{className:"p-6",children:e.jsx(Y,{})})]})]})};export{he as default};
