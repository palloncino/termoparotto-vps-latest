import{u as m,j as e,i as u}from"./index-BT8qgM4o.js";import{r as o}from"./vendor-8AKiDlQN.js";import{L as f,u as y}from"./router-BmsaeIqg.js";import{d as j,g as b}from"./clientService-sudZ8bLR.js";import{P as N}from"./Pagination-CYZtV6ob.js";import"./api-CZ7u_KBj.js";const w=({onFilterChange:l})=>{const{t:n}=m(),[a,s]=o.useState(""),[c,t]=o.useState(""),[r,p]=o.useState(""),x=i=>{i.preventDefault(),l({name:a,address:c,contact_info:r})};return e.jsx("form",{onSubmit:x,className:"mb-4",children:e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("input",{type:"text",placeholder:n("filter_by_name"),value:a,onChange:i=>s(i.target.value),className:"border rounded px-2 py-1"}),e.jsx("input",{type:"text",placeholder:n("filter_by_address"),value:c,onChange:i=>t(i.target.value),className:"border rounded px-2 py-1"}),e.jsx("input",{type:"text",placeholder:n("filter_by_contact"),value:r,onChange:i=>p(i.target.value),className:"border rounded px-2 py-1"}),e.jsx("button",{type:"submit",className:"bg-indigo-600 text-white px-4 py-1 rounded hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:n("apply_filters")})]})})},v=({clients:l,onClientDeleted:n})=>{const{t:a}=m(),{user:s}=u(),c=async t=>{if(window.confirm(a("confirm_delete_client")))try{await j(t),n==null||n(t)}catch(r){console.error("Error deleting client:",r)}};return e.jsx("div",{className:"overflow-x-auto relative",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("name")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("contact")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("address")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider sticky right-0 bg-gray-50 shadow-l",children:a("actions")})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map((t,r)=>e.jsxs("tr",{className:r%2===0?"bg-white":"bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(s==null?void 0:s.role)==="admin"?e.jsx(f,{to:`/clients/${t._id}`,className:"text-indigo-600 hover:text-indigo-900",children:t.name}):e.jsx("span",{children:t.name})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.contact_info}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.address}),e.jsx("td",{className:`px-6 py-4 whitespace-nowrap sticky right-0 shadow-l ${r%2===0?"bg-white":"bg-gray-50"}`,children:(s==null?void 0:s.role)==="admin"&&e.jsx("button",{onClick:()=>c(t._id),className:"text-red-600 hover:text-red-900",children:a("delete")})})]},t._id))})]})})},F=()=>{const{t:l}=m(),[n,a]=o.useState([]),[s,c]=o.useState(1),t=y(),[r,p]=o.useState(1),[x,i]=o.useState({name:"",address:"",contact_info:""});o.useEffect(()=>{h()},[s,x]);const h=async()=>{try{const d=await b(s,x);a(d.clients),p(d.totalPages)}catch(d){console.error("Error fetching clients:",d)}},g=d=>{i(d),c(1)};return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:l("clients")}),e.jsx("button",{onClick:()=>t("/create-client"),className:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:l("CreateClient")})]}),e.jsx(w,{onFilterChange:g}),e.jsx(v,{clients:n,onClientDeleted:()=>h()}),e.jsx(N,{currentPage:s,totalPages:r,onPageChange:c})]})};export{F as default};
