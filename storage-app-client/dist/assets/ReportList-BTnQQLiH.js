import{u as me,j as e,n as xe,o as P,l as ve,F as q,a as ie,b as le,c as oe,d as ke,p as Se,q as _e,g as ce}from"./index-BzZmYvs7.js";import{r as a}from"./vendor-8AKiDlQN.js";import{g as de,a as J,d as Ce}from"./reportService-B3mXqAmG.js";import{T as H}from"./Tooltip-B_tmM_z1.js";import{u as Ae}from"./router-BmsaeIqg.js";import"./api-Bb4ObIZy.js";const Re=({technicians:h,clients:C,worksites:V,onFiltersChange:u,onExportMonthlyUsers:j,onExportLabor:A,onExportAll:y})=>{const{t:i}=me(),[p,D]=a.useState(!1),[N,F]=a.useState(""),[M,I]=a.useState(""),[w,W]=a.useState(""),[v,G]=a.useState(""),[T,X]=a.useState(""),[$,Y]=a.useState(""),K=()=>{y==null||y()},Q=()=>{N&&(j==null||j(N,M||void 0))},Z=()=>{w&&v&&(A==null||A(w,v,T||void 0,$||void 0))};return e.jsxs("div",{className:"w-full",children:[e.jsxs("button",{onClick:()=>D(!p),className:"w-full p-4 bg-gray-50 border border-gray-200 rounded-lg hover:bg-gray-100 transition-colors flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded-lg mr-3",children:e.jsx(xe,{className:"text-blue-600 text-lg"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:i("export_tools")})]}),e.jsx("svg",{className:`w-5 h-5 text-gray-600 transition-transform duration-200 ${p?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),p&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:["1. ",i("export_all")]}),e.jsx("p",{className:"text-sm text-gray-600",children:i("export_all_description")})]}),e.jsxs("button",{onClick:K,className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors shadow-sm",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),i("export_all_button")]})]})}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:["2. ",i("monthly_users_export")]}),e.jsx("p",{className:"text-sm text-gray-600",children:i("monthly_users_export_description")})]}),e.jsxs("button",{onClick:Q,disabled:!N,className:`inline-flex items-center px-6 py-3 rounded-lg font-semibold transition-colors shadow-sm ${N?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),i("export_monthly_users")]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"month-input",className:"block text-sm font-medium text-gray-700 mb-1",children:[i("month")," *"]}),e.jsx("input",{id:"month-input",type:"month",value:N,onChange:n=>F(n.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"technician-input",className:"block text-sm font-medium text-gray-700 mb-1",children:[i("technician")," (optional)"]}),e.jsxs("select",{id:"technician-input",value:M,onChange:n=>I(n.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:i("all_technicians")}),h.map(n=>e.jsx("option",{value:n._id,children:n.name},n._id))]})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:["3. ",i("labor_export")]}),e.jsx("p",{className:"text-sm text-gray-600",children:i("labor_export_description")})]}),e.jsxs("button",{onClick:Z,disabled:!w||!v,className:`inline-flex items-center px-6 py-3 rounded-lg font-semibold transition-colors shadow-sm ${w&&v?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),i("export_labor")]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"start-date-input",className:"block text-sm font-medium text-gray-700 mb-1",children:[i("start_date")," *"]}),e.jsx("input",{id:"start-date-input",type:"date",value:w,onChange:n=>W(n.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"end-date-input",className:"block text-sm font-medium text-gray-700 mb-1",children:[i("end_date")," *"]}),e.jsx("input",{id:"end-date-input",type:"date",value:v,onChange:n=>G(n.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"client-input",className:"block text-sm font-medium text-gray-700 mb-1",children:[i("client")," (optional)"]}),e.jsxs("select",{id:"client-input",value:T,onChange:n=>X(n.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:i("all_clients")}),C.map(n=>e.jsx("option",{value:n._id,children:n.name},n._id))]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"worksite-input",className:"block text-sm font-medium text-gray-700 mb-1",children:[i("worksite")," (optional)"]}),e.jsxs("select",{id:"worksite-input",value:$,onChange:n=>Y(n.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:i("all_worksites")}),V.map(n=>e.jsx("option",{value:n._id,children:n.name},n._id))]})]})]})]})]})},$e=()=>{const{t:h}=me(),C=Ae(),{user:V}=ve(),[u,j]=a.useState([]),[A,y]=a.useState(!0),[i,p]=a.useState(null),[D,N]=a.useState([]),[F,M]=a.useState([]),[I,w]=a.useState([]),[W,v]=a.useState(new Set),[G,T]=a.useState("date"),[X,$]=a.useState("desc"),[Y,K]=a.useState(""),[Q,Z]=a.useState(""),[n,De]=a.useState(""),[l,O]=a.useState(null),[k,ee]=a.useState(!1),[se,z]=a.useState(null),[te,ae]=a.useState(null),[he,L]=a.useState(!1),[Fe,ue]=a.useState(!1);a.useEffect(()=>{ue(!0),(async()=>{try{const t=await de();j(t),y(!1)}catch(t){const r=t instanceof Error?t.message:"Unknown error";p("Failed to fetch reports: "+r),y(!1)}})()},[]);const pe=async s=>{if(window.confirm("Sei sicuro di voler eliminare questo rapporto?"))try{await Ce(s);const t=await de();j(t)}catch(t){const r=t instanceof Error?t.message:"Unknown error";p("Errore durante l'eliminazione: "+r)}},ne=async()=>{try{const s=await J({reportId:u.map(d=>d._id).join(",")}),t=new Blob([s],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),r=window.URL.createObjectURL(t),o=document.createElement("a");o.href=r,o.download=`all-reports-${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(r)}catch(s){const t=s instanceof Error?s.message:"Error exporting all reports";p(t)}},ge=async(s,t)=>{var r;try{const o=await J({month:s,technician:t}),d=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),g=window.URL.createObjectURL(d),x=document.createElement("a");x.href=g;const b=t?((r=D.find(S=>S._id===t))==null?void 0:r.name)||"selected-technician":"all-technicians";x.download=`monthly-export-${s}-${b}.xlsx`,document.body.appendChild(x),x.click(),document.body.removeChild(x),window.URL.revokeObjectURL(g)}catch(o){const d=o instanceof Error?o.message:"Error exporting monthly users data";p(d)}},be=async(s,t,r,o)=>{var d,g;try{const x=await J({month:s.substring(0,7),client:r,worksite:o}),b=new Blob([x],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),S=window.URL.createObjectURL(b),f=document.createElement("a");f.href=S;const R=r?((d=F.find(m=>m._id===r))==null?void 0:d.name)||"selected-client":"all-clients",c=o?((g=I.find(m=>m._id===o))==null?void 0:g.name)||"selected-worksite":"all-worksites";f.download=`labor-export-${s}-to-${t}-${R}-${c}.xlsx`,document.body.appendChild(f),f.click(),document.body.removeChild(f),window.URL.revokeObjectURL(S)}catch(x){const b=x instanceof Error?x.message:"Error exporting labor data";p(b)}},fe=(s,t="success")=>{t==="success"?(ae(s),setTimeout(()=>ae(null),3e3)):(z(s),setTimeout(()=>z(null),3e3))},U=a.useMemo(()=>{const s=localStorage.getItem("monthly_reports_analysis");if(!s)return!0;try{const t=JSON.parse(s),r=new Date(t.timestamp).getTime(),o=new Date().getTime(),d=24*60*60*1e3;return o-r>d}catch{return!0}},[]),E=a.useMemo(()=>{if(!u||!Array.isArray(u))return[];const s=new Date,t=new Date(s.getFullYear(),s.getMonth()-1,1),r=new Date(s.getFullYear(),s.getMonth(),1);return u.filter(o=>{const d=new Date(o.date);return d>=t&&d<r})},[u]),B=async(s=!1)=>{if(!(!s&&!U)){ee(!0),z(null);try{const t=E,r=t.length,o=t.filter(c=>c.status==="FINITO").length,d=t.reduce((c,m)=>{var _;return c+(((_=m.activities)==null?void 0:_.reduce((je,ye)=>{var re;return je+(((re=ye.tasks)==null?void 0:re.reduce((Ne,we)=>Ne+(we.work_hours||0),0))||0)},0))||0)},0),g=r>0?d/r:0,x=new Set(t.map(c=>typeof c.technician_id=="object"?c.technician_id._id:c.technician_id)).size,b=new Set(t.flatMap(c=>{var m;return((m=c.activities)==null?void 0:m.map(_=>_.client_id))||[]})).size,S=new Set(t.flatMap(c=>{var m;return((m=c.activities)==null?void 0:m.map(_=>_.worksite_id))||[]})).size,f={totalReports:r,completedReports:o,totalHours:d,averageHoursPerReport:g,technicianCount:x,clientCount:b,worksiteCount:S,month:new Date().toLocaleDateString("it-IT",{month:"long",year:"numeric"})},R=await fetch("http://localhost:1669/api/ai/analyze-reports",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)});if(R.ok){const c=await R.json(),m={insights:c.insights||[],recommendations:c.recommendations||[],trends:c.trends||[],summary:c.summary||"Analisi completata",source:"deepseek",lastUpdated:new Date().toISOString()};O(m),localStorage.setItem("monthly_reports_analysis",JSON.stringify({...m,timestamp:new Date().toISOString()})),fe("Analisi AI completata con successo!","success")}else throw new Error(`API error: ${R.status}`)}catch{const r={insights:[`Analizzati ${E.length} rapporti del mese scorso`,"Analisi locale completata - API non disponibile","I dati sono stati elaborati localmente"],recommendations:["Controllare la connessione API","Verificare la disponibilità del servizio"],trends:[`${E.length} rapporti analizzati`],summary:`Analisi locale completata per ${E.length} rapporti del mese scorso.`,source:"local",lastUpdated:new Date().toISOString()};O(r),z("Analisi AI non disponibile - utilizzata analisi locale"),localStorage.setItem("monthly_reports_analysis",JSON.stringify({...r,timestamp:new Date().toISOString()}))}finally{ee(!1)}}};return a.useEffect(()=>{const s=localStorage.getItem("monthly_reports_analysis");if(s)try{const t=JSON.parse(s);O(t)}catch{}!s&&U&&u.length>0&&B()},[u.length,U]),A?e.jsx("div",{className:"text-center py-8",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(q,{className:"animate-spin text-blue-600 text-xl mr-3"}),e.jsx("span",{className:"text-gray-600",children:"Caricamento rapporti..."})]})}):i?e.jsx("div",{className:"text-center py-8",children:e.jsxs("div",{className:"text-red-600 mb-4",children:[e.jsx("p",{className:"mb-2",children:i}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Riprova"})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:h("reports")}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Gestione rapporti di lavoro"})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-6",children:[e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 mb-6 shadow-sm",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Gestione Rapporti"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Crea, visualizza e analizza i rapporti di lavoro"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("button",{onClick:()=>C("/create-report"),className:"inline-flex items-center justify-center px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),h("create_report")]}),e.jsxs("button",{onClick:ne,className:"inline-flex items-center justify-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[e.jsx(xe,{className:"w-4 h-4 mr-2"}),"Esporta Tutti"]})]})]})}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border border-indigo-200 rounded-lg p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ie,{className:"text-xl text-indigo-600"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-indigo-800 text-sm",children:"Analisi AI Rapporti"}),e.jsx("p",{className:"text-xs text-indigo-600",children:l?`Ultimo aggiornamento: ${new Date(l.lastUpdated).toLocaleDateString("it-IT")}`:"Nessuna analisi disponibile"})]}),l&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-indigo-600 text-sm",children:"📊"}),e.jsx("span",{className:"text-xs text-indigo-700 font-medium",children:"Analisi Disponibile"}),e.jsx("span",{className:"text-xs text-indigo-500 bg-indigo-100 px-2 py-1 rounded-full",children:l.source==="deepseek"?"DeepSeek AI":"Locale"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[l&&e.jsxs("button",{onClick:()=>L(!0),className:"px-3 py-2 text-xs bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 transition-colors flex items-center space-x-2",children:[e.jsx(le,{className:"text-indigo-600"}),e.jsx("span",{children:"Visualizza"})]}),e.jsx("button",{onClick:()=>B(!!l),disabled:k,className:`px-4 py-2 text-sm rounded-lg font-medium transition-all duration-200 ${k?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-indigo-600 text-white hover:bg-indigo-700 hover:shadow-md"}`,children:k?e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"inline animate-spin mr-2"}),"Analizzando..."]}):l?e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"inline mr-2"}),"Aggiorna"]}):e.jsxs(e.Fragment,{children:[e.jsx(ke,{className:"inline mr-2"}),"Inizia Analisi"]})})]})]}),te&&e.jsx("div",{className:"mt-3 bg-green-50 border border-green-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-green-600 mr-2",children:"✅"}),e.jsx("p",{className:"text-green-800 text-sm font-medium",children:te})]})}),se&&e.jsx("div",{className:"mt-3 bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-red-600 mr-2",children:"❌"}),e.jsx("p",{className:"text-red-800 text-sm font-medium",children:se})]})})]})}),e.jsx("div",{className:"mb-6",children:e.jsx(Re,{technicians:D,clients:F,worksites:I,onExportMonthlyUsers:ge,onExportLabor:be,onExportAll:ne})}),u.length===0?e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-8 shadow-sm text-center",children:e.jsx("p",{className:"text-gray-500",children:h("no_reports_found")})}):e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:h("date")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:h("technician")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:h("status")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:h("lunch_location")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:h("actions")})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(s=>{var t;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.date?new Date(s.date).toLocaleDateString("it-IT"):"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:typeof s.technician_id=="object"&&((t=s.technician_id)!=null&&t.name)?s.technician_id.name:"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${s.status==="DRAFT"?"bg-yellow-100 text-yellow-800":s.status==="FINITO"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:s.status==="DRAFT"?"Bozza":s.status==="FINITO"?"Completato":s.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.lunch_location||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(H,{content:"Visualizza",children:e.jsx("button",{onClick:()=>C(`/reports/${s._id}`),className:"text-blue-600 hover:text-blue-900",children:e.jsx(le,{})})}),e.jsx(H,{content:"Modifica",children:e.jsx("button",{onClick:()=>C(`/reports/${s._id}/edit`),className:"text-indigo-600 hover:text-indigo-900",children:e.jsx(Se,{})})}),e.jsx(H,{content:"Elimina",children:e.jsx("button",{onClick:()=>pe(s._id),className:"text-red-600 hover:text-red-900",children:e.jsx(_e,{})})})]})})]},s._id)})})]})})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 mt-6 shadow-sm",children:e.jsxs("div",{className:"text-sm text-gray-600",children:[h("total_reports"),": ",u.length]})})]}),he&&l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>L(!1),children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 px-6 py-4 rounded-t-xl",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ie,{className:"text-2xl text-white"}),e.jsx("h2",{className:"text-xl font-bold text-white",children:"Analisi AI dei Rapporti"})]}),e.jsx("button",{onClick:()=>L(!1),className:"text-white hover:text-indigo-100 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"mt-2 text-indigo-100 text-sm",children:["Ultimo aggiornamento: ",new Date(l.lastUpdated).toLocaleDateString("it-IT")]})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-100",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center",children:[e.jsx(ce,{className:"mr-2 text-blue-600"}),"Riepilogo Esecutivo"]}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:l.summary})]}),l.insights&&l.insights.length>0&&e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),"Insights Chiave"]}),e.jsx("ul",{className:"space-y-2",children:l.insights.map((s,t)=>e.jsxs("li",{className:"text-gray-700 text-sm flex items-start",children:[e.jsx("span",{className:"text-blue-500 mr-2 mt-1",children:"•"}),s]},t))})]}),l.recommendations&&l.recommendations.length>0&&e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),"Raccomandazioni"]}),e.jsx("ul",{className:"space-y-2",children:l.recommendations.map((s,t)=>e.jsxs("li",{className:"text-gray-700 text-sm flex items-start",children:[e.jsx("span",{className:"text-green-500 mr-2 mt-1",children:"💡"}),s]},t))})]})]}),l.trends&&l.trends.length>0&&e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-4 border border-purple-100",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center",children:[e.jsx(ce,{className:"mr-2 text-purple-600"}),"Tendenze Identificate"]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-3",children:l.trends.map((s,t)=>e.jsx("div",{className:"bg-white rounded-lg p-3 border border-purple-200 shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-purple-500 mr-2",children:"📈"}),e.jsx("span",{className:"text-gray-700 text-sm",children:s})]})},t))})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Fonte: ",e.jsx("span",{className:`font-medium ${l.source==="deepseek"?"text-indigo-600":"text-gray-600"}`,children:l.source==="deepseek"?"DeepSeek AI":"Analisi Locale"})]}),e.jsx("button",{onClick:()=>{L(!1),B(!0)},disabled:k,className:`px-4 py-2 rounded-lg font-medium transition-colors ${k?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-indigo-600 text-white hover:bg-indigo-700"}`,children:k?e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"inline animate-spin mr-2"}),"Aggiornando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"inline mr-2"}),"Aggiorna Analisi"]})})]})]})]})})]})};export{$e as default};
