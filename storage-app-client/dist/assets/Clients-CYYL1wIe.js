import{u,r as o,j as e,g,L as f,h as y}from"./index-DfDgnTih.js";import{d as b,a as j}from"./clientService-DWml5I6n.js";import{P as w}from"./Pagination-CKhc5RPv.js";import"./api-B396KAwJ.js";const N=({onFilterChange:i})=>{const{t:r}=u(),[a,s]=o.useState(""),[c,t]=o.useState(""),[l,p]=o.useState(""),x=n=>{n.preventDefault(),i({name:a,address:c,contact_info:l})};return e.jsxs("form",{onSubmit:x,className:"flex space-x-4",children:[e.jsx("input",{type:"text",placeholder:r("filter_by_name"),value:a,onChange:n=>s(n.target.value),className:"border rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("input",{type:"text",placeholder:r("filter_by_address"),value:c,onChange:n=>t(n.target.value),className:"border rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("input",{type:"text",placeholder:r("filter_by_contact"),value:l,onChange:n=>p(n.target.value),className:"border rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded cursor-pointer hover:bg-blue-600 transition-colors",children:r("apply_filters")})]})},v=({clients:i,onClientDeleted:r})=>{const{t:a}=u(),{user:s}=g(),c=async t=>{if(window.confirm(a("confirm_delete_client")))try{await b(t),r==null||r(t)}catch(l){console.error("Error deleting client:",l)}};return e.jsx("div",{className:"overflow-x-auto relative",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("name")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("contact")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("address")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider sticky right-0 bg-gray-50 shadow-l",children:a("actions")})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(s==null?void 0:s.role)==="admin"?e.jsx(f,{to:`/clients/${t._id}`,className:"text-indigo-600 hover:text-indigo-900",children:t.name}):e.jsx("span",{children:t.name})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.contact_info}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.address}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap sticky right-0 bg-white shadow-l",children:(s==null?void 0:s.role)==="admin"&&e.jsx("button",{onClick:()=>c(t._id),className:"text-red-600 hover:text-red-900",children:a("delete")})})]},t._id))})]})})},P=()=>{const{t:i}=u(),[r,a]=o.useState([]),[s,c]=o.useState(1),t=y(),[l,p]=o.useState(1),[x,n]=o.useState({name:"",address:"",contact_info:""});o.useEffect(()=>{h()},[s,x]);const h=async()=>{try{const d=await j(s,x);a(d.clients),p(d.totalPages)}catch(d){console.error("Error fetching clients:",d)}},m=d=>{n(d),c(1)};return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:i("clients")}),e.jsxs("div",{className:"flex items-center w-full space-x-4",children:[e.jsx(N,{onFilterChange:m}),e.jsx("button",{onClick:()=>t("/create-client"),className:"bg-blue-500 text-white px-4 py-2 rounded cursor-pointer hover:bg-blue-600 transition-colors",children:i("CreateClient")})]}),e.jsx(v,{clients:r,onClientDeleted:()=>h()}),e.jsx(w,{currentPage:s,totalPages:l,onPageChange:c})]})};export{P as default};
