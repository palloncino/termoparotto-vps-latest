import{u as m,r as l,j as e,b as u,L as g,e as j}from"./index-DBn0QrPF.js";import{P as y}from"./Pagination-BsFmlSt8.js";import{a as f}from"./usersService-D84MQp6X.js";import"./api-CLE4YwRs.js";const b=({onFilterChange:i})=>{const{t:s}=m(),[r,t]=l.useState(""),[o,d]=l.useState(""),[c,x]=l.useState(""),p=a=>{a.preventDefault(),i({name:r,email:o,role:c})};return e.jsx("form",{onSubmit:p,className:"mb-4",children:e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("input",{type:"text",placeholder:s("filter_by_name"),value:r,onChange:a=>t(a.target.value),className:"border rounded px-2 py-1"}),e.jsx("input",{type:"text",placeholder:s("filter_by_email"),value:o,onChange:a=>d(a.target.value),className:"border rounded px-2 py-1"}),e.jsxs("select",{value:c,onChange:a=>x(a.target.value),className:"border rounded px-2 py-1",children:[e.jsx("option",{value:"",children:s("all_roles")}),e.jsx("option",{value:"admin",children:s("admin")}),e.jsx("option",{value:"user",children:s("user")})]}),e.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-1 rounded",children:s("apply_filters")})]})})},N=({users:i})=>{const{t:s}=m(),{user:r}=u();return e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s("name")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s("email")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s("role")})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(r==null?void 0:r.role)==="admin"?e.jsx(g,{to:`/users/${t._id}`,className:"text-indigo-600 hover:text-indigo-900",children:t.name}):e.jsx("span",{children:t.name})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.email}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.role})]},t._id))})]})},U=()=>{const{showFlashMessage:i}=j(),[s,r]=l.useState([]),[t,o]=l.useState(1),[d,c]=l.useState(1),[x,p]=l.useState({name:"",email:"",role:""});l.useEffect(()=>{a()},[]);const a=async()=>{try{const n=await f(t,x);r(n.users),c(n.totalPages)}catch(n){i(typeof n=="string"?n:n.message,"error")}},h=n=>{p(n),o(1)};return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Users"}),e.jsx(b,{onFilterChange:h}),e.jsx(N,{users:s}),e.jsx(y,{currentPage:t,totalPages:d,onPageChange:o})]})};export{U as default};
