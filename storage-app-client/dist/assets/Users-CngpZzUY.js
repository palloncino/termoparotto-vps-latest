import{u as p,r as l,j as e,b as g,L as y,e as j}from"./index-DrlQhJEk.js";import{P as f}from"./Pagination-DFUMhPRf.js";import{d as w,a as N}from"./usersService-CO4rIiT5.js";import"./api-CLE4YwRs.js";const b=({onFilterChange:d})=>{const{t:s}=p(),[a,r]=l.useState(""),[c,t]=l.useState(""),[o,x]=l.useState(""),m=n=>{n.preventDefault(),d({name:a,email:c,role:o})};return e.jsx("form",{onSubmit:m,className:"mb-4",children:e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("input",{type:"text",placeholder:s("filter_by_name"),value:a,onChange:n=>r(n.target.value),className:"border rounded px-2 py-1"}),e.jsx("input",{type:"text",placeholder:s("filter_by_email"),value:c,onChange:n=>t(n.target.value),className:"border rounded px-2 py-1"}),e.jsxs("select",{value:o,onChange:n=>x(n.target.value),className:"border rounded px-2 py-1",children:[e.jsx("option",{value:"",children:s("all_roles")}),e.jsx("option",{value:"admin",children:s("admin")}),e.jsx("option",{value:"user",children:s("user")})]}),e.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-1 rounded",children:s("apply_filters")})]})})},v=({users:d,onUserDeleted:s})=>{const{t:a}=p(),{user:r}=g(),c=async t=>{if(window.confirm(a("confirm_delete_user")))try{await w(t),s==null||s(t)}catch(o){console.error("Error deleting user:",o)}};return e.jsx("div",{className:"overflow-x-auto relative",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("name")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("email")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("role")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider sticky right-0 bg-gray-50 shadow-l",children:a("actions")})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(r==null?void 0:r.role)==="admin"?e.jsx(y,{to:`/users/${t._id}`,className:"text-indigo-600 hover:text-indigo-900",children:t.name}):e.jsx("span",{children:t.name})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.email}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.role}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap sticky right-0 bg-white shadow-l",children:(r==null?void 0:r.role)==="admin"&&t._id!==r._id&&e.jsx("button",{onClick:()=>c(t._id),className:"text-red-600 hover:text-red-900",children:a("delete")})})]},t._id))})]})})},P=()=>{const{t:d}=p(),{showFlashMessage:s}=j(),[a,r]=l.useState([]),[c,t]=l.useState(1),[o,x]=l.useState(1),[m,n]=l.useState({name:"",email:"",role:""});l.useEffect(()=>{h()},[]);const h=async()=>{try{const i=await N(c,m);r(i.users),x(i.totalPages)}catch(i){s(typeof i=="string"?i:i.message,"error")}},u=i=>{n(i),t(1)};return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:d("users")}),e.jsx(b,{onFilterChange:u}),e.jsx(v,{users:a,onUserDeleted:()=>h()}),e.jsx(f,{currentPage:c,totalPages:o,onPageChange:t})]})};export{P as default};
