import{K as M,k as L,l as xe,y as H,n as z,$ as re,_ as ne,s as K,o as F,O as te,m as q,P as U,p as B,q as me,r as P,t as k,T as w,v as he,w as ge,x as ve,z as Te,u as Pe,j as h}from"./index-CDqGnBVK.js";import{r as s,b as C}from"./vendor-8AKiDlQN.js";import{R as we}from"./ReportList-CWpBPomo.js";import{R as Ie}from"./ReportForm-D3-NNZLj.js";import{a as $e}from"./reportService-CmqWvr86.js";import"./router-BmsaeIqg.js";import"./clientService-qRF0PNhS.js";import"./api-BqC8VQ1e.js";import"./usersService--1COgLA-.js";import"./worksiteService-DblhuvHv.js";import"./Tooltip-ljkmbqI4.js";import"./formatDate-BuXJr5y_.js";import"./ReportDetails-Dj7lfo4U.js";import"./productsService-BwLSiUTT.js";import"./ReportHeader-ChsY3L9b.js";let ye="span";var ae=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(ae||{});function Ee(e,t){var n;let{features:r=1,...o}=e,a={ref:t,"aria-hidden":(r&2)===2?!0:(n=o["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return L()({ourProps:a,theirProps:o,slot:{},defaultTag:ye,name:"Hidden"})}let se=M(Ee);function Se({onFocus:e}){let[t,n]=s.useState(!0),r=xe();return t?C.createElement(se,{as:"button",type:"button",features:ae.Focusable,onFocus:o=>{o.preventDefault();let a,l=50;function u(){if(l--<=0){a&&cancelAnimationFrame(a);return}if(e()){if(cancelAnimationFrame(a),!r.current)return;n(!1);return}a=requestAnimationFrame(u)}a=requestAnimationFrame(u)}}):null}const le=s.createContext(null);function Re(){return{groups:new Map,get(e,t){var n;let r=this.groups.get(e);r||(r=new Map,this.groups.set(e,r));let o=(n=r.get(t))!=null?n:0;r.set(t,o+1);let a=Array.from(r.keys()).indexOf(t);function l(){let u=r.get(t);u>1?r.set(t,u-1):r.delete(t)}return[a,l]}}}function Fe({children:e}){let t=s.useRef(Re());return s.createElement(le.Provider,{value:t},e)}function oe(e){let t=s.useContext(le);if(!t)throw new Error("You must wrap your component in a <StableCollection>");let n=s.useId(),[r,o]=t.current.get(e,n);return s.useEffect(()=>o,[]),r}var Ae=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Ae||{}),je=(e=>(e[e.Less=-1]="Less",e[e.Equal=0]="Equal",e[e.Greater=1]="Greater",e))(je||{}),ke=(e=>(e[e.SetSelectedIndex=0]="SetSelectedIndex",e[e.RegisterTab=1]="RegisterTab",e[e.UnregisterTab=2]="UnregisterTab",e[e.RegisterPanel=3]="RegisterPanel",e[e.UnregisterPanel=4]="UnregisterPanel",e))(ke||{});let Ce={0(e,t){var n;let r=U(e.tabs,c=>c.current),o=U(e.panels,c=>c.current),a=r.filter(c=>{var i;return!((i=c.current)!=null&&i.hasAttribute("disabled"))}),l={...e,tabs:r,panels:o};if(t.index<0||t.index>r.length-1){let c=q(Math.sign(t.index-e.selectedIndex),{[-1]:()=>1,0:()=>q(Math.sign(t.index),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0});if(a.length===0)return l;let i=q(c,{0:()=>r.indexOf(a[0]),1:()=>r.indexOf(a[a.length-1])});return{...l,selectedIndex:i===-1?e.selectedIndex:i}}let u=r.slice(0,t.index),g=[...r.slice(t.index),...u].find(c=>a.includes(c));if(!g)return l;let b=(n=r.indexOf(g))!=null?n:e.selectedIndex;return b===-1&&(b=e.selectedIndex),{...l,selectedIndex:b}},1(e,t){if(e.tabs.includes(t.tab))return e;let n=e.tabs[e.selectedIndex],r=U([...e.tabs,t.tab],a=>a.current),o=e.selectedIndex;return e.info.current.isControlled||(o=r.indexOf(n),o===-1&&(o=e.selectedIndex)),{...e,tabs:r,selectedIndex:o}},2(e,t){return{...e,tabs:e.tabs.filter(n=>n!==t.tab)}},3(e,t){return e.panels.includes(t.panel)?e:{...e,panels:U([...e.panels,t.panel],n=>n.current)}},4(e,t){return{...e,panels:e.panels.filter(n=>n!==t.panel)}}},J=s.createContext(null);J.displayName="TabsDataContext";function D(e){let t=s.useContext(J);if(t===null){let n=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,D),n}return t}let Y=s.createContext(null);Y.displayName="TabsActionsContext";function Q(e){let t=s.useContext(Y);if(t===null){let n=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Q),n}return t}function De(e,t){return q(t.type,Ce,e,t)}let Me="div";function Le(e,t){let{defaultIndex:n=0,vertical:r=!1,manual:o=!1,onChange:a,selectedIndex:l=null,...u}=e;const g=r?"vertical":"horizontal",b=o?"manual":"auto";let c=l!==null,i=K({isControlled:c}),A=H(t),[x,p]=s.useReducer(De,{info:i,selectedIndex:l??n,tabs:[],panels:[]}),N=s.useMemo(()=>({selectedIndex:x.selectedIndex}),[x.selectedIndex]),_=K(a||(()=>{})),$=K(x.tabs),m=s.useMemo(()=>({orientation:g,activation:b,...x}),[g,b,x]),j=F(f=>(p({type:1,tab:f}),()=>p({type:2,tab:f}))),O=F(f=>(p({type:3,panel:f}),()=>p({type:4,panel:f}))),v=F(f=>{T.current!==f&&_.current(f),c||p({type:0,index:f})}),T=K(c?e.selectedIndex:x.selectedIndex),E=s.useMemo(()=>({registerTab:j,registerPanel:O,change:v}),[]);z(()=>{p({type:0,index:l??n})},[l]),z(()=>{if(T.current===void 0||x.tabs.length<=0)return;let f=U(x.tabs,y=>y.current);f.some((y,S)=>x.tabs[S]!==y)&&v(f.indexOf(x.tabs[T.current]))});let V={ref:A},G=L();return C.createElement(Fe,null,C.createElement(Y.Provider,{value:E},C.createElement(J.Provider,{value:m},m.tabs.length<=0&&C.createElement(Se,{onFocus:()=>{var f,y;for(let S of $.current)if(((f=S.current)==null?void 0:f.tabIndex)===0)return(y=S.current)==null||y.focus(),!0;return!1}}),G({ourProps:V,theirProps:u,slot:N,defaultTag:Me,name:"Tabs"}))))}let Ne="div";function _e(e,t){let{orientation:n,selectedIndex:r}=D("Tab.List"),o=H(t),a=s.useMemo(()=>({selectedIndex:r}),[r]),l=e,u={ref:o,role:"tablist","aria-orientation":n};return L()({ourProps:u,theirProps:l,slot:a,defaultTag:Ne,name:"Tabs.List"})}let Oe="button";function Ge(e,t){var n,r;let o=s.useId(),{id:a=`headlessui-tabs-tab-${o}`,disabled:l=!1,autoFocus:u=!1,...g}=e,{orientation:b,activation:c,selectedIndex:i,tabs:A,panels:x}=D("Tab"),p=Q("Tab"),N=D("Tab"),[_,$]=s.useState(null),m=s.useRef(null),j=H(m,t,$);z(()=>p.registerTab(m),[p,m]);let O=oe("tabs"),v=A.indexOf(m);v===-1&&(v=O);let T=v===i,E=F(d=>{var I;let W=d();if(W===B.Success&&c==="auto"){let fe=(I=me(m))==null?void 0:I.activeElement,ee=N.tabs.findIndex(be=>be.current===fe);ee!==-1&&p.change(ee)}return W}),V=F(d=>{let I=A.map(W=>W.current).filter(Boolean);if(d.key===P.Space||d.key===P.Enter){d.preventDefault(),d.stopPropagation(),p.change(v);return}switch(d.key){case P.Home:case P.PageUp:return d.preventDefault(),d.stopPropagation(),E(()=>k(I,w.First));case P.End:case P.PageDown:return d.preventDefault(),d.stopPropagation(),E(()=>k(I,w.Last))}if(E(()=>q(b,{vertical(){return d.key===P.ArrowUp?k(I,w.Previous|w.WrapAround):d.key===P.ArrowDown?k(I,w.Next|w.WrapAround):B.Error},horizontal(){return d.key===P.ArrowLeft?k(I,w.Previous|w.WrapAround):d.key===P.ArrowRight?k(I,w.Next|w.WrapAround):B.Error}}))===B.Success)return d.preventDefault()}),G=s.useRef(!1),f=F(()=>{var d;G.current||(G.current=!0,(d=m.current)==null||d.focus({preventScroll:!0}),p.change(v),he(()=>{G.current=!1}))}),y=F(d=>{d.preventDefault()}),{isFocusVisible:S,focusProps:ue}=re({autoFocus:u}),{isHovered:X,hoverProps:ie}=ge({isDisabled:l}),{pressed:Z,pressProps:de}=ve({disabled:l}),ce=s.useMemo(()=>({selected:T,hover:X,active:Z,focus:S,autofocus:u,disabled:l}),[T,X,S,Z,u,l]),pe=ne({ref:j,onKeyDown:V,onMouseDown:y,onClick:f,id:a,role:"tab",type:Te(e,_),"aria-controls":(r=(n=x[v])==null?void 0:n.current)==null?void 0:r.id,"aria-selected":T,tabIndex:T?0:-1,disabled:l||void 0,autoFocus:u},ue,ie,de);return L()({ourProps:pe,theirProps:g,slot:ce,defaultTag:Oe,name:"Tabs.Tab"})}let Ue="div";function qe(e,t){let{selectedIndex:n}=D("Tab.Panels"),r=H(t),o=s.useMemo(()=>({selectedIndex:n}),[n]),a=e,l={ref:r};return L()({ourProps:l,theirProps:a,slot:o,defaultTag:Ue,name:"Tabs.Panels"})}let He="div",We=te.RenderStrategy|te.Static;function Ke(e,t){var n,r,o,a;let l=s.useId(),{id:u=`headlessui-tabs-panel-${l}`,tabIndex:g=0,...b}=e,{selectedIndex:c,tabs:i,panels:A}=D("Tab.Panel"),x=Q("Tab.Panel"),p=s.useRef(null),N=H(p,t);z(()=>x.registerPanel(p),[x,p]);let _=oe("panels"),$=A.indexOf(p);$===-1&&($=_);let m=$===c,{isFocusVisible:j,focusProps:O}=re(),v=s.useMemo(()=>({selected:m,focus:j}),[m,j]),T=ne({ref:N,id:u,role:"tabpanel","aria-labelledby":(r=(n=i[$])==null?void 0:n.current)==null?void 0:r.id,tabIndex:m?g:-1},O),E=L();return!m&&((o=b.unmount)==null||o)&&!((a=b.static)!=null&&a)?C.createElement(se,{"aria-hidden":"true",...T}):E({ourProps:T,theirProps:b,slot:v,defaultTag:He,features:We,visible:m,name:"Tabs.Panel"})}let Be=M(Ge),ze=M(Le),Ve=M(_e),Je=M(qe),Ye=M(Ke),R=Object.assign(Be,{Group:ze,List:Ve,Panels:Je,Panel:Ye});const pt=()=>{const{t:e}=Pe(),[t,n]=s.useState([]),[r,o]=s.useState(!0),[a,l]=s.useState(null),[u,g]=s.useState(()=>{const i=localStorage.getItem("selectedTab");return i?parseInt(i,10):0});s.useEffect(()=>{b()},[]),s.useEffect(()=>{localStorage.setItem("selectedTab",u.toString())},[u]);const b=async()=>{o(!0);try{const i=await $e();n(i),l(null)}catch(i){l(e("error_fetching_reports")),console.error(e("error_fetching_reports"),i)}finally{o(!1)}},c=()=>{b()};return h.jsxs("div",{className:"max-w-7xl mx-auto",children:[h.jsx("h1",{className:"text-3xl font-bold mb-6",children:e("reports")}),h.jsxs(R.Group,{selectedIndex:u,onChange:g,children:[h.jsxs(R.List,{className:"flex space-x-1 rounded-xl bg-blue-900/20 p-1 mb-6",children:[h.jsx(R,{className:({selected:i})=>`w-full rounded-lg py-2.5 text-sm font-medium leading-5 text-blue-700
               ${i?"bg-white shadow":"text-blue-100 hover:bg-white/[0.12] hover:text-white"}`,children:e("report_list")}),h.jsx(R,{className:({selected:i})=>`w-full rounded-lg py-2.5 text-sm font-medium leading-5 text-blue-700
               ${i?"bg-white shadow":"text-blue-100 hover:bg-white/[0.12] hover:text-white"}`,children:e("create_report")})]}),h.jsxs(R.Panels,{children:[h.jsx(R.Panel,{children:r?h.jsx("p",{children:e("loading_reports")}):a?h.jsx("p",{className:"text-red-500",children:a}):h.jsx(we,{reports:t,onReportDeleted:c})}),h.jsx(R.Panel,{children:h.jsx(Ie,{})})]})]})]})};export{pt as default};
