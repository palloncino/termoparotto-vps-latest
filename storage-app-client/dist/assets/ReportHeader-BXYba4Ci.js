import{u as I,j as e,q as S,z as C,A as q,B as F,C as D,s as L,D as B,E as M,k as H,G as U,H as V,l as G}from"./index-BzZmYvs7.js";import{f as O,R as z}from"./ReportDetails-BBw8wZ_z.js";import{T as P}from"./Tooltip-B_tmM_z1.js";import{r as E,R as Z}from"./vendor-8AKiDlQN.js";const J=({activity:n,index:l,clients:m=[],worksites:o=[],products:h=[],users:N=[],handleActivityChange:i,removeActivity:w,appendTask:y,removeTask:u,appendMaterial:_,removeMaterial:v})=>{var x,f,p;const{t:a}=I(),k=r=>{const{checked:t}=r.target,s=t?"rules":"manual";i(l,"valid_travel_time",s),s==="manual"?i(l,"travel_time_rules_applied",void 0):s==="rules"&&i(l,"travel_time_hours","")},T=r=>{const t=r.target.value;if(!t){i(l,"travel_time_hours","");return}if(/^\d*[.,]?\d{0,2}$/.test(t)){const s=t.replace(",",".");i(l,"travel_time_hours",s)}},R=r=>{const t=r.target.value;if(t){const s=parseFloat(t.replace(",","."));i(l,"travel_time_hours",Number(s.toFixed(2)))}},d=r=>{const t=parseInt(r.target.value,10);let s=0;switch(t){case 15:s=.5;break;case 26:s=1;break;case 46:s=2;break;case 66:s=2.5;break;default:s=0}i(l,"travel_time_rules_applied",{distance_km:t,travel_time_hours:s,note:`Rule for ${t} km`}),i(l,"travel_time_hours",s)},b=(r,t)=>{const s=t.target.value;if(!s){i(l,`tasks[${r}].work_hours`,"");return}if(/^\d*[.,]?\d{0,2}$/.test(s)){const c=s.replace(",",".");i(l,`tasks[${r}].work_hours`,c)}},$=(r,t)=>{const s=t.target.value;if(s){const c=parseFloat(s.replace(",","."));i(l,`tasks[${r}].work_hours`,Number(c.toFixed(2)))}};return e.jsxs("div",{className:"grid grid-cols-1 gap-8 p-8",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 p-6 rounded-xl shadow-lg text-white",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-white text-blue-600 rounded-full w-12 h-12 flex items-center justify-center font-bold text-xl",children:l+1}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-2xl font-bold",children:[a("activity")," ",l+1]}),e.jsx("p",{className:"text-lg opacity-90 mt-1",children:a("activity_description","Configure your work activity")})]})]}),e.jsx(P,{content:a("remove_activity"),children:e.jsx("button",{type:"button","data-testid":`remove-activity-${l}-button`,className:"bg-red-500 hover:bg-red-600 text-white p-3 rounded-xl transition-all duration-200 shadow-md hover:shadow-lg",onClick:()=>w(l),children:e.jsx(S,{className:"text-lg"})})})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2 border-blue-200",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx(C,{className:"text-2xl text-blue-500"}),e.jsx("h4",{className:"text-xl font-semibold text-gray-800",children:a("client_and_worksite","Client & Worksite")})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-lg border-2 border-blue-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(C,{className:"text-lg text-blue-600"}),e.jsx("label",{className:"block text-sm font-semibold text-blue-800",children:a("client")})]}),e.jsxs("select",{"data-testid":`activity-${l}-client-select`,className:"w-full px-4 py-3 rounded-lg border-2 border-blue-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white font-medium",value:n.client_id||"",onChange:r=>i(l,"client_id",r.target.value),children:[e.jsx("option",{value:"",children:a("select_client")}),m.map(r=>e.jsx("option",{value:r._id,children:r.name},r._id))]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-lg border-2 border-blue-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(q,{className:"text-lg text-blue-600"}),e.jsx("label",{className:"block text-sm font-semibold text-blue-800",children:a("worksite")})]}),e.jsxs("select",{"data-testid":`activity-${l}-worksite-select`,className:"w-full px-4 py-3 rounded-lg border-2 border-blue-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white font-medium",value:n.worksite_id||"",onChange:r=>i(l,"worksite_id",r.target.value),children:[e.jsx("option",{value:"",children:a("select_worksite")}),o.filter(r=>{const t=r.client_id||r.clientId,s=n.client_id;return s?t?t.toString()===s.toString():!1:!0}).map(r=>e.jsx("option",{value:r._id,children:r.name},r._id))]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2 border-blue-200",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx(F,{className:"text-2xl text-blue-500"}),e.jsx("h4",{className:"text-xl font-semibold text-gray-800",children:a("travel_time")})]}),e.jsx("div",{className:"flex items-start gap-4 mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:`valid_travel_time_${l}`,className:"rounded border-gray-300 text-blue-500 focus:ring-blue-500",checked:n.valid_travel_time==="rules",onChange:k}),e.jsx("label",{htmlFor:`valid_travel_time_${l}`,className:"ml-2 text-sm font-medium text-gray-700",children:a("use_travel_time_rules")})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:`w-full ${n.valid_travel_time!=="manual"?"opacity-50 pointer-events-none":""}`,children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a("manual_travel_time_hours")," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text","data-testid":`activity-${l}-travel-time-input`,className:`w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${n.valid_travel_time==="manual"&&(!n.travel_time_hours||n.travel_time_hours<=0)?"border-red-500 bg-red-50":"border-gray-300"}`,value:n.travel_time_hours||"",onChange:T,onBlur:R,placeholder:a("enter_travel_time_hours")}),e.jsx("div",{className:"mt-2 text-sm text-gray-600",children:O(n.travel_time_hours||0,a)}),n.valid_travel_time==="manual"&&(!n.travel_time_hours||n.travel_time_hours<=0)&&e.jsx("div",{className:"mt-1 text-sm text-red-600",children:a("travel_time_required")})]}),e.jsxs("div",{className:`w-full ${n.valid_travel_time!=="rules"?"opacity-50 pointer-events-none":""}`,children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a("travel_time_rules")," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{className:`w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${n.valid_travel_time==="rules"&&!((x=n.travel_time_rules_applied)!=null&&x.distance_km)?"border-red-500 bg-red-50":"border-gray-300"}`,value:((f=n.travel_time_rules_applied)==null?void 0:f.distance_km)||"",onChange:d,children:[e.jsx("option",{value:"",children:a("select_distance")}),e.jsx("option",{value:"15",children:"15-25 km"}),e.jsx("option",{value:"26",children:"26-45 km"}),e.jsx("option",{value:"46",children:"46-65 km"}),e.jsx("option",{value:"66",children:"66-100 km"})]}),n.valid_travel_time==="rules"&&!((p=n.travel_time_rules_applied)!=null&&p.distance_km)&&e.jsx("div",{className:"mt-1 text-sm text-red-600",children:a("travel_time_rules_required")}),e.jsx("div",{className:"mt-2 text-sm text-gray-600 bg-gray-50 p-3 rounded-lg",children:e.jsxs("ul",{className:"space-y-1",children:[e.jsx("li",{children:"• 15-25 km from headquarters → 0.5 hours travel time"}),e.jsx("li",{children:"• 26-45 km from headquarters → 1 hour travel time"}),e.jsx("li",{children:"• 46-65 km from headquarters → 2 hours travel time"}),e.jsx("li",{children:"• 66-100 km from headquarters → 2.5 hours travel time"})]})})]})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 p-6 rounded-xl shadow-lg text-white mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(D,{className:"text-3xl"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-2xl font-bold",children:a("tasks")}),e.jsx("p",{className:"text-lg opacity-90 mt-1",children:a("work_items_description","Define your work tasks and materials")})]})]}),e.jsxs("button",{type:"button","data-testid":`activity-${l}-add-task-button`,className:"bg-white text-blue-600 hover:bg-blue-50 px-6 py-3 rounded-xl transition-all duration-200 shadow-md hover:shadow-lg font-semibold flex items-center gap-2",onClick:r=>y(r,l),children:[e.jsx(L,{size:16})," ",a("add_task")]})]})}),e.jsx("div",{className:"grid grid-cols-1 gap-8",children:n.tasks.map((r,t)=>e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl shadow-lg border-2 border-blue-200 p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-blue-500 text-white rounded-full w-10 h-10 flex items-center justify-center font-bold text-lg",children:t+1}),e.jsxs("h5",{className:"text-xl font-bold text-blue-800",children:[a("task")," ",t+1]})]}),e.jsx("button",{type:"button",className:"bg-red-500 hover:bg-red-600 text-white p-3 rounded-xl transition-all duration-200 shadow-md hover:shadow-lg",onClick:()=>u(l,t),children:e.jsx(S,{className:"text-lg"})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"block text-sm font-semibold text-blue-800 mb-2",children:a("task_description")}),e.jsx("textarea",{"data-testid":`activity-${l}-task-${t}-description`,className:"w-full px-4 py-3 rounded-lg border-2 border-blue-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 min-h-[80px] bg-white",value:r.task_description,onChange:s=>i(l,`tasks[${t}].task_description`,s.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border-2 border-blue-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(F,{className:"text-lg text-blue-600"}),e.jsx("label",{className:"block text-sm font-semibold text-blue-800",children:a("work_hours")})]}),e.jsx("input",{type:"text","data-testid":`activity-${l}-task-${t}-work-hours`,className:"w-full px-4 py-3 rounded-lg border-2 border-blue-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-medium",value:r.work_hours||"",onChange:s=>b(t,s),onBlur:s=>$(t,s),placeholder:a("work_hours_placeholder")}),e.jsx("div",{className:"mt-2 text-sm text-blue-600 font-medium",children:(r==null?void 0:r.work_hours)&&O(r==null?void 0:r.work_hours,a)})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border-2 border-blue-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(B,{className:"text-lg text-blue-600"}),e.jsx("label",{className:"block text-sm font-semibold text-blue-800",children:a("intervention_type")})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("label",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-blue-50",children:[e.jsx("input",{type:"radio",name:`intervention_type_${t}`,"data-testid":`activity-${l}-task-${t}-intervention-da-preventivo`,checked:r.intervention_type.da_preventivo,onChange:s=>{i(l,`tasks[${t}].intervention_type.da_preventivo`,!0),i(l,`tasks[${t}].intervention_type.in_economia`,!1),i(l,`tasks[${t}].intervention_type.sopralluogo`,!1)},className:"text-blue-500 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm font-medium",children:a("da_preventivo")})]}),e.jsxs("label",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-blue-50",children:[e.jsx("input",{type:"radio",name:`intervention_type_${t}`,checked:r.intervention_type.in_economia,onChange:s=>{i(l,`tasks[${t}].intervention_type.da_preventivo`,!1),i(l,`tasks[${t}].intervention_type.in_economia`,!0),i(l,`tasks[${t}].intervention_type.sopralluogo`,!1)},className:"text-blue-500 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm font-medium",children:a("in_economia")})]}),e.jsxs("label",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-blue-50",children:[e.jsx("input",{type:"radio",name:`intervention_type_${t}`,checked:r.intervention_type.sopralluogo,onChange:s=>{i(l,`tasks[${t}].intervention_type.da_preventivo`,!1),i(l,`tasks[${t}].intervention_type.in_economia`,!1),i(l,`tasks[${t}].intervention_type.sopralluogo`,!0)},className:"text-blue-500 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm font-medium",children:a("sopralluogo")})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border-2 border-orange-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(M,{className:"text-lg text-orange-600"}),e.jsx("label",{className:"block text-sm font-semibold text-orange-800",children:a("material_unloading","Material Unloading")})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",id:`material_unloading_${t}`,checked:r.material_unloading||!1,onChange:s=>i(l,`tasks[${t}].material_unloading`,s.target.checked),className:"w-4 h-4 text-orange-500 focus:ring-orange-500 border-orange-300 rounded"}),e.jsx("label",{htmlFor:`material_unloading_${t}`,className:"text-sm font-medium text-orange-800",children:a("material_unloading_required","Material unloading required")})]}),r.material_unloading&&e.jsxs("div",{className:"ml-7",children:[e.jsx("label",{className:"block text-sm font-medium text-orange-700 mb-2",children:a("unloading_hours","Unloading Hours")}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 rounded-lg border-2 border-orange-300 focus:ring-2 focus:ring-orange-500 focus:border-orange-500 font-medium",value:r.material_unloading_hours||"",onChange:s=>{const c=s.target.value;if(!c){i(l,`tasks[${t}].material_unloading_hours`,"");return}if(/^\d*[.,]?\d{0,2}$/.test(c)){const j=c.replace(",",".");i(l,`tasks[${t}].material_unloading_hours`,j)}},onBlur:s=>{const c=s.target.value;if(c){const j=parseFloat(c.replace(",","."));i(l,`tasks[${t}].material_unloading_hours`,Number(j.toFixed(2)))}},placeholder:a("unloading_hours_placeholder","0.0")}),e.jsx("div",{className:"mt-1 text-sm text-orange-600",children:r.material_unloading_hours&&O(r.material_unloading_hours,a)})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border-2 border-emerald-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(M,{className:"text-lg text-emerald-600"}),e.jsx("label",{className:"block text-sm font-semibold text-emerald-800",children:a("materials")})]}),e.jsxs("button",{type:"button",className:"bg-emerald-500 hover:bg-emerald-600 text-white px-4 py-2 rounded-lg transition-all duration-200 shadow-md hover:shadow-lg flex items-center gap-2",onClick:s=>{s.preventDefault(),s.stopPropagation(),_(s,l,t)},children:[e.jsx(L,{size:14})," ",a("add")]})]}),e.jsx("div",{className:"space-y-3",children:r.materials_used.map((s,c)=>{var j,A;return e.jsxs("div",{className:"grid grid-cols-[1fr,120px,auto] gap-3 p-3 bg-emerald-50 rounded-lg border border-emerald-200",children:[e.jsxs("select",{className:`px-3 py-2 rounded-lg border-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 bg-white font-medium ${s.product_id?"border-emerald-300":"border-red-300 bg-red-50"}`,value:typeof s.product_id=="string"?s.product_id:((j=s.product_id)==null?void 0:j._id)||"",onChange:g=>i(l,`tasks[${t}].materials_used[${c}].product_id`,g.target.value),required:!0,children:[e.jsx("option",{value:"",children:a("select_product")}),h.map(g=>e.jsx("option",{value:g._id,children:g.descrizione},g._id))]}),!(typeof s.product_id=="string"?s.product_id:(A=s.product_id)!=null&&A._id)&&e.jsx("div",{className:"text-red-500 text-xs mt-1",children:a("product_required","Product selection is required")}),e.jsx("input",{type:"number",className:"px-3 py-2 rounded-lg border-2 border-green-300 focus:ring-2 focus:ring-green-500 focus:border-green-500 bg-white font-medium",value:typeof s.quantity=="number"?s.quantity:parseFloat(s.quantity)||"",onChange:g=>i(l,`tasks[${t}].materials_used[${c}].quantity`,parseFloat(g.target.value)||0),placeholder:a("qty"),min:"1",step:"0.1"}),e.jsx("button",{type:"button",className:"bg-red-500 hover:bg-red-600 text-white p-2 rounded-lg transition-all duration-200 shadow-md hover:shadow-lg",onClick:()=>v(l,t,c),children:e.jsx(S,{size:14})})]},c)})})]})]})]},t))})]})]})},Q=({report:n,onClose:l,validateForm:m})=>{var a,k,T,R;const{t:o}=I(),[h,N]=E.useState({}),[i,w]=E.useState(!1);E.useEffect(()=>{if(m){const d=m();N(d),w(Object.keys(d).length>0)}},[m,n]);const y=d=>{const b={"header.date":o("date"),"header.author_id":o("author"),"header.status":o("status"),"header.lunch_location":o("lunch_location"),client_id:o("client"),worksite_id:o("worksite"),travel_time_hours:o("travel_time"),travel_time_rules_applied:o("travel_time_rules"),task_description:o("task_description"),work_hours:o("work_hours"),intervention_type:o("intervention_type"),quantity:o("quantity")},$=d.split(".").pop()||d;if(d.includes("activities[")&&d.includes("tasks[")){const x=d.match(/activities\[(\d+)\]\.tasks\[(\d+)\]\.(.+)/);if(x){const[,f,p,r]=x,t=b[r]||r;return`${o("activity")} ${parseInt(f)+1} - ${o("task")} ${parseInt(p)+1} - ${t}`}}if(d.includes("activities[")){const x=d.match(/activities\[(\d+)\]\.(.+)/);if(x){const[,f,p]=x,r=b[p]||p;return`${o("activity")} ${parseInt(f)+1} - ${r}`}}if(d.startsWith("header.")){const x=d.replace("header.","");return b[x]||x}return b[$]||$},u=d=>{l()},_=d=>{d.stopPropagation()},v=e.jsx("div",{"data-testid":"preview-modal-overlay",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:9999},className:"flex items-center justify-center",onClick:u,children:e.jsxs("div",{className:"bg-white rounded-lg p-8 w-full max-w-[1350px] relative overflow-y-auto max-h-[90vh] m-4",onClick:_,children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold","data-testid":"preview-title",children:o("report_preview")}),e.jsx("button",{"data-testid":"preview-close-button",onClick:l,className:"text-gray-600 hover:text-gray-800 transition-colors",children:e.jsx(H,{})})]}),i?e.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(U,{className:"text-red-500 text-lg"}),e.jsxs("h3",{className:"text-lg font-semibold text-red-800",children:["⚠️ ",o("validation_errors_found","Validation Errors Found")]})]}),e.jsx("p",{className:"text-red-700 mb-3",children:o("preview_validation_message","The following fields need to be corrected before submitting:")}),e.jsxs("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:[Object.entries(h).slice(0,10).map(([d,b])=>e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"text-red-500 text-sm",children:"•"}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-sm font-medium text-red-800",children:[y(d),":"]}),e.jsx("span",{className:"text-sm text-red-700 ml-1",children:b})]})]},d)),Object.keys(h).length>10&&e.jsxs("div",{className:"text-sm text-red-600 italic",children:["... and ",Object.keys(h).length-10," more errors"]})]})]}):e.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(V,{className:"text-green-500 text-lg"}),e.jsxs("h3",{className:"text-lg font-semibold text-green-800",children:["✅ ",o("form_is_valid","Form is Valid")]})]}),e.jsx("p",{className:"text-green-700 mt-1",children:o("ready_to_submit","All required fields are completed. Ready to submit!")})]}),e.jsx("p",{className:"text-gray-500 italic mb-4",children:o("this_is_a_preview_of_your_report")}),e.jsx(z,{report:{...n,_id:"preview-id",created:new Date().toISOString(),last_updated:new Date().toISOString(),technician_id:((a=n.header)==null?void 0:a.author_id)||"",status:((k=n.header)==null?void 0:k.status)||"DRAFT",date:((T=n.header)==null?void 0:T.date)||"",lunch_location:((R=n.header)==null?void 0:R.lunch_location)||"",activities:n.activities||[]}})]})});return Z.createPortal(v,document.body)},ee=({formData:n,users:l,handleChange:m})=>{const{t:o}=I(),[h,N]=E.useState(!1),{user:i}=G(),w=["NO PRANZO","ALTRO","CASA","ALBERGO CIMA D' ASTA DI FATTORE GLORIA","al Brenta S.r.l Albergo Ristorante","La Rotonda di Betti Marco & C. Snc Albergo Ristorante","BAR VILLA","BETTY S HILL DI MARIGHETTO BETTY","Birra Forst S.P.A.   Brauerei Forst A.G.","CAMPING VALMALENE","CHARRO'S TEX MEX ESERCIZI RIUNITI SNC","CRUCOLO OSTERIE SRL","HOTEL KAPRIOL DI FONTANA SCHADE & C.SAS","HOTEL VELA Fratelli Guetti S.r.l.","MONTE CIMONE T.R.D.di Tiziano Zangoni & C.snc","ZUM MOHREN RESTAURANT PIZZERIA","RISTO 3 SOC. COOP.","RISTO' DA GUIDO S.R.L.","AL MULINO S.N.C. di RISTORANTE","ALLA STAZIONE DI MURATOVIC HANIFA RISTORANTE","SAN GIORGIO DI GUIDI ERIC RISTORANTE","INSERISCI MANUALMENTE RISTORANTE"],y=u=>{const _=u.target.value;if(_==="INSERISCI MANUALMENTE RISTORANTE"||_==="ALTRO"){N(!0);const v=document.getElementById("manual_lunch_location");v&&(v.value="")}else N(!1);m(u)};return e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:o("date")}),e.jsx("input",{type:"date",name:"date","data-testid":"report-date-input",className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:n.date,onChange:m,required:!0})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:o("author")}),e.jsxs("select",{name:"author_id","data-testid":"report-author-select",className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:n.author_id,onChange:m,required:!0,children:[e.jsx("option",{value:"",children:o("select_author")}),i&&i.role==="user"?e.jsx("option",{value:i._id,children:i.name},i._id):l==null?void 0:l.map(u=>e.jsx("option",{value:u._id,children:u.name},u._id))]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:o("status")}),e.jsxs("select",{name:"status","data-testid":"report-status-select",className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:n.status,onChange:m,required:!0,children:[e.jsx("option",{value:"",children:o("select_status")}),e.jsx("option",{value:"PLANNED",children:o("planned")}),e.jsx("option",{value:"IN_PROGRESS",children:o("in_progress")}),e.jsx("option",{value:"FINITO",children:o("finito")}),e.jsx("option",{value:"SOSPESO",children:o("sospeso")}),e.jsx("option",{value:"DRAFT",children:o("draft")}),e.jsx("option",{value:"SIMULATION_TEST",children:o("simulation_test")})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:o("lunch_location")}),e.jsxs("select",{name:"lunch_location","data-testid":"report-lunch-location-select",className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:n.lunch_location||"",onChange:y,children:[e.jsx("option",{value:"",children:o("select_lunch_location")}),w.map(u=>e.jsx("option",{value:u,children:u},u))]}),h&&e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:o("manual_lunch_location")}),e.jsx("input",{id:"manual_lunch_location",type:"text",name:"lunch_location","data-testid":"report-manual-lunch-input",className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:o("enter_manual_lunch_location"),onChange:m})]})]})]})]})})};export{J as A,Q as P,ee as R};
