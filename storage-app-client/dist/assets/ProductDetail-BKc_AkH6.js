import{u as f,a as v,j as e}from"./index-Bb6EHiR5.js";import{r as l}from"./vendor-8AKiDlQN.js";import{e as j,u as w}from"./productsService-BwLSiUTT.js";import{c as _,u as N}from"./router-BmsaeIqg.js";import"./api-BqC8VQ1e.js";const F=()=>{const{t:o}=f(),{id:i}=_(),h=N(),{user:r}=v(),[s,c]=l.useState(null),[u,d]=l.useState(!1);l.useEffect(()=>{x()},[i]);const x=async()=>{try{const t=await j(i);c(t)}catch(t){console.error(o("error_fetching_product"),t)}},g=async t=>{if(t.preventDefault(),(r==null?void 0:r.role)!=="admin"){alert(o("admin_update_alert"));return}try{await w(i,s),d(!1),alert(o("product_update_success"))}catch(n){console.error(o("error_updating_product"),n),alert(o("product_update_failed"))}},m=t=>{const{name:n,value:p}=t.target;c(b=>({...b,[n]:n.includes("prezzo")||n.includes("utile")||n.includes("imponibile")||n.includes("iva")?parseFloat(p):p}))};if(!s)return e.jsx("div",{className:"text-center mt-8",children:o("loading")});const a=(t,n="text")=>e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:t,children:o(t)}),u?n==="select"?e.jsxs("select",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:t,name:t,value:s[t],onChange:m,children:[e.jsx("option",{value:"product",children:o("product")}),e.jsx("option",{value:"material",children:o("material")})]}):e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:t,name:t,type:n,value:s[t],onChange:m,step:n==="number"?"0.01":void 0}):e.jsx("p",{className:"py-2 px-3 bg-gray-100 rounded",children:n==="number"?s[t].toFixed(2):s[t]})]});return e.jsxs("div",{className:"max-w-3xl mx-auto mt-8 p-6 bg-white rounded-lg shadow-lg",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6 text-gray-800",children:o("product_details")}),e.jsxs("form",{onSubmit:g,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a("data_documento"),a("fornitore"),a("descrizione"),a("descrizione_interna"),a("prezzo_acquisto","number"),a("utile","number"),a("imponibile","number"),a("iva_10","number"),a("iva_22","number")]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[u?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition duration-300",type:"submit",children:o("save_changes")}),e.jsx("button",{className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition duration-300",type:"button",onClick:()=>d(!1),children:o("cancel")})]}):(r==null?void 0:r.role)==="admin"&&e.jsx("button",{className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition duration-300",type:"button",onClick:()=>d(!0),children:o("edit")}),e.jsx("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition duration-300",type:"button",onClick:()=>h("/products"),children:o("back_to_products")})]})]})]})};export{F as default};
