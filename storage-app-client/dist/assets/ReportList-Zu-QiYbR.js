import{u as ie,j as e,l as ve,m as O,i as ke,F as U,a as se,b as te,c as ae,d as Se,n as _e,o as Ae,g as ne}from"./index-BT8qgM4o.js";import{r as a}from"./vendor-8AKiDlQN.js";import{g as re,a as $,d as Re}from"./reportService-B371uuyd.js";import{T as B}from"./Tooltip-rScwkKB4.js";import{u as Ie}from"./router-BmsaeIqg.js";import"./api-CZ7u_KBj.js";const Ce=({technicians:u,clients:A,worksites:P,onFiltersChange:d,onExportMonthlyUsers:p,onExportLabor:g,onExportAll:b})=>{const{t:r}=ie(),[x,f]=a.useState(!1),[j,y]=a.useState(""),[D,N]=a.useState(""),[w,J]=a.useState(""),[v,q]=a.useState(""),[F,W]=a.useState(""),[L,k]=a.useState(""),V=()=>{b==null||b()},Y=()=>{j&&(p==null||p(j,D||void 0))},H=()=>{w&&v&&(g==null||g(w,v,F||void 0,L||void 0))};return e.jsxs("div",{className:"w-full",children:[e.jsxs("button",{onClick:()=>f(!x),className:"w-full p-4 bg-gray-50 border border-gray-200 rounded-lg hover:bg-gray-100 transition-colors flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded-lg mr-3",children:e.jsx(ve,{className:"text-blue-600 text-lg"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:r("export_tools")})]}),e.jsx("svg",{className:`w-5 h-5 text-gray-600 transition-transform duration-200 ${x?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),x&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:["1. ",r("export_all")]}),e.jsx("p",{className:"text-sm text-gray-600",children:r("export_all_description")})]}),e.jsxs("button",{onClick:V,className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors shadow-sm",children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),r("export_all_button")]})]})}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:["2. ",r("monthly_users_export")]}),e.jsx("p",{className:"text-sm text-gray-600",children:r("monthly_users_export_description")})]}),e.jsxs("button",{onClick:Y,disabled:!j,className:`inline-flex items-center px-6 py-3 rounded-lg font-semibold transition-colors shadow-sm ${j?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),r("export_monthly_users")]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"month-input",className:"block text-sm font-medium text-gray-700 mb-1",children:[r("month")," *"]}),e.jsx("input",{id:"month-input",type:"month",value:j,onChange:n=>y(n.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"technician-input",className:"block text-sm font-medium text-gray-700 mb-1",children:[r("technician")," (optional)"]}),e.jsxs("select",{id:"technician-input",value:D,onChange:n=>N(n.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:r("all_technicians")}),u.map(n=>e.jsx("option",{value:n._id,children:n.name},n._id))]})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:["3. ",r("labor_export")]}),e.jsx("p",{className:"text-sm text-gray-600",children:r("labor_export_description")})]}),e.jsxs("button",{onClick:H,disabled:!w||!v,className:`inline-flex items-center px-6 py-3 rounded-lg font-semibold transition-colors shadow-sm ${w&&v?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),r("export_labor")]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"start-date-input",className:"block text-sm font-medium text-gray-700 mb-1",children:[r("start_date")," *"]}),e.jsx("input",{id:"start-date-input",type:"date",value:w,onChange:n=>J(n.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"end-date-input",className:"block text-sm font-medium text-gray-700 mb-1",children:[r("end_date")," *"]}),e.jsx("input",{id:"end-date-input",type:"date",value:v,onChange:n=>q(n.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"client-input",className:"block text-sm font-medium text-gray-700 mb-1",children:[r("client")," (optional)"]}),e.jsxs("select",{id:"client-input",value:F,onChange:n=>W(n.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:r("all_clients")}),A.map(n=>e.jsx("option",{value:n._id,children:n.name},n._id))]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"worksite-input",className:"block text-sm font-medium text-gray-700 mb-1",children:[r("worksite")," (optional)"]}),e.jsxs("select",{id:"worksite-input",value:L,onChange:n=>k(n.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:r("all_worksites")}),P.map(n=>e.jsx("option",{value:n._id,children:n.name},n._id))]})]})]})]})]})},Oe=()=>{const{t:u}=ie(),A=Ie(),{user:P}=ke(),[d,p]=a.useState([]),[g,b]=a.useState(!0),[r,x]=a.useState(null),[f,j]=a.useState([]),[y,D]=a.useState([]),[N,w]=a.useState([]),[J,v]=a.useState(new Set),[q,F]=a.useState("date"),[W,L]=a.useState("desc"),[k,V]=a.useState(""),[Y,H]=a.useState(""),[n,De]=a.useState(""),[o,E]=a.useState(null),[S,X]=a.useState(!1),[G,R]=a.useState(null),[K,Q]=a.useState(null),[le,I]=a.useState(!1),[oe,ce]=a.useState(!1);a.useEffect(()=>{console.log("🚀 MINIMAL useEffect triggered!"),ce(!0),(async()=>{try{console.log("📡 Fetching reports...");const t=await re();console.log("✅ Reports fetched:",t),p(t),b(!1)}catch(t){console.error("❌ Error fetching reports:",t);const i=t instanceof Error?t.message:"Unknown error";x("Failed to fetch reports: "+i),b(!1)}})()},[]);const de=async s=>{if(window.confirm("Sei sicuro di voler eliminare questo rapporto?"))try{await Re(s);const t=await re();p(t)}catch(t){console.error("Error deleting report:",t);const i=t instanceof Error?t.message:"Unknown error";x("Errore durante l'eliminazione: "+i)}},me=async()=>{try{const s=await $({reportId:d.map(h=>h._id).join(",")}),t=new Blob([s],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),i=window.URL.createObjectURL(t),l=document.createElement("a");l.href=i,l.download=`all-reports-${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(i)}catch(s){const t=s instanceof Error?s.message:"Error exporting all reports";x(t)}},xe=async()=>{try{const s=await $({month:k,technician:f&&f.length>0?f[0]._id:void 0}),t=new Blob([s],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),i=window.URL.createObjectURL(t),l=document.createElement("a");l.href=i,l.download=`monthly-users-${k}-${new Date().getFullYear()}.xlsx`,document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(i)}catch(s){const t=s instanceof Error?s.message:"Error exporting monthly users data";x(t)}},he=async()=>{try{const s=await $({month:k,client:y&&y.length>0?y[0]._id:void 0,worksite:N&&N.length>0?N[0]._id:void 0}),t=new Blob([s],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),i=window.URL.createObjectURL(t),l=document.createElement("a");l.href=i,l.download=`labor-export-${k||"all"}.xlsx`,document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(i)}catch(s){const t=s instanceof Error?s.message:"Error exporting labor data";x(t)}},ue=(s,t="success")=>{t==="success"?(Q(s),setTimeout(()=>Q(null),3e3)):(R(s),setTimeout(()=>R(null),3e3))},z=a.useMemo(()=>{const s=localStorage.getItem("monthly_reports_analysis");if(!s)return!0;try{const t=JSON.parse(s),i=new Date(t.timestamp).getTime(),l=new Date().getTime(),h=24*60*60*1e3;return l-i>h}catch{return!0}},[]),C=a.useMemo(()=>{if(!d||!Array.isArray(d))return[];const s=new Date,t=new Date(s.getFullYear(),s.getMonth()-1,1),i=new Date(s.getFullYear(),s.getMonth(),1);return d.filter(l=>{const h=new Date(l.date);return h>=t&&h<i})},[d]),M=async(s=!1)=>{if(!s&&!z){console.log("⏰ Analysis skipped - within 24h limit");return}X(!0),R(null);try{console.log("🧠 Starting AI analysis of last month reports...");const t=C,i=t.length,l=t.filter(c=>c.status==="FINITO").length,h=t.reduce((c,m)=>{var _;return c+(((_=m.activities)==null?void 0:_.reduce((je,ye)=>{var ee;return je+(((ee=ye.tasks)==null?void 0:ee.reduce((Ne,we)=>Ne+(we.work_hours||0),0))||0)},0))||0)},0),pe=i>0?h/i:0,ge=new Set(t.map(c=>typeof c.technician_id=="object"?c.technician_id._id:c.technician_id)).size,be=new Set(t.flatMap(c=>{var m;return((m=c.activities)==null?void 0:m.map(_=>_.client_id))||[]})).size,fe=new Set(t.flatMap(c=>{var m;return((m=c.activities)==null?void 0:m.map(_=>_.worksite_id))||[]})).size,Z={totalReports:i,completedReports:l,totalHours:h,averageHoursPerReport:pe,technicianCount:ge,clientCount:be,worksiteCount:fe,month:new Date().toLocaleDateString("it-IT",{month:"long",year:"numeric"})};console.log("📊 Analysis data prepared:",Z);const T=await fetch("http://localhost:1669/api/ai/analyze-reports",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Z)});if(T.ok){const c=await T.json(),m={insights:c.insights||[],recommendations:c.recommendations||[],trends:c.trends||[],summary:c.summary||"Analisi completata",source:"deepseek",lastUpdated:new Date().toISOString()};E(m),localStorage.setItem("monthly_reports_analysis",JSON.stringify({...m,timestamp:new Date().toISOString()})),console.log("✅ AI analysis completed successfully"),ue("Analisi AI completata con successo!","success")}else throw new Error(`API error: ${T.status}`)}catch(t){console.error("❌ AI analysis failed:",t);const i={insights:[`Analizzati ${C.length} rapporti del mese scorso`,"Analisi locale completata - API non disponibile","I dati sono stati elaborati localmente"],recommendations:["Controllare la connessione API","Verificare la disponibilità del servizio"],trends:[`${C.length} rapporti analizzati`],summary:`Analisi locale completata per ${C.length} rapporti del mese scorso.`,source:"local",lastUpdated:new Date().toISOString()};E(i),R("Analisi AI non disponibile - utilizzata analisi locale"),localStorage.setItem("monthly_reports_analysis",JSON.stringify({...i,timestamp:new Date().toISOString()}))}finally{X(!1)}};return a.useEffect(()=>{const s=localStorage.getItem("monthly_reports_analysis");if(s)try{const t=JSON.parse(s);E(t),console.log("📋 Loaded cached AI analysis")}catch(t){console.error("❌ Failed to parse cached analysis:",t)}!s&&z&&d.length>0&&M()},[d.length,z]),console.log("🔍 Current state - isLoading:",g,"error:",r,"reports length:",d==null?void 0:d.length,"effectRun:",oe),g?(console.log("⏳ Rendering loading state..."),e.jsx("div",{className:"text-center py-8",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(U,{className:"animate-spin text-blue-600 text-xl mr-3"}),e.jsx("span",{className:"text-gray-600",children:"Caricamento rapporti..."})]})})):r?e.jsx("div",{className:"text-center py-8",children:e.jsxs("div",{className:"text-red-600 mb-4",children:[e.jsx("p",{className:"mb-2",children:r}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Riprova"})]})}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border border-indigo-200 rounded-lg p-3 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(se,{className:"text-xl text-indigo-600"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-indigo-800 text-sm",children:"Analisi AI Rapporti"}),e.jsx("p",{className:"text-xs text-indigo-600",children:o?`Ultimo aggiornamento: ${new Date(o.lastUpdated).toLocaleDateString("it-IT")}`:"Nessuna analisi disponibile"})]}),o&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-indigo-600 text-sm",children:"📊"}),e.jsx("span",{className:"text-xs text-indigo-700 font-medium",children:"Nuova Analisi Disponibile"}),e.jsx("span",{className:"text-xs text-indigo-500 bg-indigo-100 px-2 py-1 rounded-full",children:o.source==="deepseek"?"DeepSeek AI":"Locale"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[o&&e.jsxs("button",{onClick:()=>I(!0),className:"px-2 py-1.5 text-xs bg-indigo-100 text-indigo-700 rounded hover:bg-indigo-200 transition-colors flex items-center space-x-1",children:[e.jsx(te,{className:"text-indigo-600 text-xs"}),e.jsx("span",{children:"Visualizza"})]}),e.jsx("button",{onClick:()=>M(!!o),disabled:S,className:`px-3 py-1.5 text-xs rounded font-medium transition-all duration-200 ${S?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-indigo-600 text-white hover:bg-indigo-700 hover:shadow-md"}`,children:S?e.jsxs(e.Fragment,{children:[e.jsx(U,{className:"inline animate-spin mr-1"}),"Analizzando..."]}):o?e.jsxs(e.Fragment,{children:[e.jsx(ae,{className:"inline mr-1"}),"Aggiorna"]}):e.jsxs(e.Fragment,{children:[e.jsx(Se,{className:"inline mr-1"}),"Inizia"]})})]})]})}),K&&e.jsx("div",{className:"mt-2 bg-green-50 border border-green-200 rounded-lg p-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-green-600 mr-2",children:"✅"}),e.jsx("p",{className:"text-green-800 text-xs font-medium",children:K})]})}),G&&e.jsx("div",{className:"mt-2 bg-red-50 border border-red-200 rounded-lg p-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-red-600 mr-2",children:"❌"}),e.jsx("p",{className:"text-red-800 text-xs font-medium",children:G})]})})]}),e.jsx("div",{className:"mb-8",children:e.jsx(Ce,{technicians:f,clients:y,worksites:N,onExportMonthlyUsers:xe,onExportLabor:he,onExportAll:me})}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Lista Rapporti"}),d.length===0?e.jsx("p",{className:"text-gray-500 text-center py-8",children:u("no_reports_found")}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:u("date")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:u("technician")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:u("status")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:u("lunch_location")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:u("actions")})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map(s=>{var t;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.date?new Date(s.date).toLocaleDateString("it-IT"):"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:typeof s.technician_id=="object"&&((t=s.technician_id)!=null&&t.name)?s.technician_id.name:"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${s.status==="DRAFT"?"bg-yellow-100 text-yellow-800":s.status==="FINITO"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:s.status==="DRAFT"?"Bozza":s.status==="FINITO"?"Completato":s.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.lunch_location||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(B,{content:"Visualizza",children:e.jsx("button",{onClick:()=>A(`/reports/${s._id}`),className:"text-blue-600 hover:text-blue-900",children:e.jsx(te,{})})}),e.jsx(B,{content:"Modifica",children:e.jsx("button",{onClick:()=>A(`/reports/${s._id}/edit`),className:"text-indigo-600 hover:text-indigo-900",children:e.jsx(_e,{})})}),e.jsx(B,{content:"Elimina",children:e.jsx("button",{onClick:()=>de(s._id),className:"text-red-600 hover:text-red-900",children:e.jsx(Ae,{})})})]})})]},s._id)})})]})})]}),le&&o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>I(!1),children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 px-6 py-4 rounded-t-xl",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(se,{className:"text-2xl text-white"}),e.jsx("h2",{className:"text-xl font-bold text-white",children:"Analisi AI dei Rapporti"})]}),e.jsx("button",{onClick:()=>I(!1),className:"text-white hover:text-indigo-100 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"mt-2 text-indigo-100 text-sm",children:["Ultimo aggiornamento: ",new Date(o.lastUpdated).toLocaleDateString("it-IT")]})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-100",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center",children:[e.jsx(ne,{className:"mr-2 text-blue-600"}),"Riepilogo Esecutivo"]}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:o.summary})]}),o.insights&&o.insights.length>0&&e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),"Insights Chiave"]}),e.jsx("ul",{className:"space-y-2",children:o.insights.map((s,t)=>e.jsxs("li",{className:"text-gray-700 text-sm flex items-start",children:[e.jsx("span",{className:"text-blue-500 mr-2 mt-1",children:"•"}),s]},t))})]}),o.recommendations&&o.recommendations.length>0&&e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),"Raccomandazioni"]}),e.jsx("ul",{className:"space-y-2",children:o.recommendations.map((s,t)=>e.jsxs("li",{className:"text-gray-700 text-sm flex items-start",children:[e.jsx("span",{className:"text-green-500 mr-2 mt-1",children:"💡"}),s]},t))})]})]}),o.trends&&o.trends.length>0&&e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-4 border border-purple-100",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center",children:[e.jsx(ne,{className:"mr-2 text-purple-600"}),"Tendenze Identificate"]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-3",children:o.trends.map((s,t)=>e.jsx("div",{className:"bg-white rounded-lg p-3 border border-purple-200 shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-purple-500 mr-2",children:"📈"}),e.jsx("span",{className:"text-gray-700 text-sm",children:s})]})},t))})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Fonte: ",e.jsx("span",{className:`font-medium ${o.source==="deepseek"?"text-indigo-600":"text-gray-600"}`,children:o.source==="deepseek"?"DeepSeek AI":"Analisi Locale"})]}),e.jsx("button",{onClick:()=>{I(!1),M(!0)},disabled:S,className:`px-4 py-2 rounded-lg font-medium transition-colors ${S?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-indigo-600 text-white hover:bg-indigo-700"}`,children:S?e.jsxs(e.Fragment,{children:[e.jsx(U,{className:"inline animate-spin mr-2"}),"Aggiornando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ae,{className:"inline mr-2"}),"Aggiorna Analisi"]})})]})]})]})})]})};export{Oe as default};
