import{u as h,l as x,j as e}from"./index-BzZmYvs7.js";import{r as i}from"./vendor-8AKiDlQN.js";import{a as f,u as b}from"./clientService-Crb_EkMB.js";import{c as p,u as g}from"./router-BmsaeIqg.js";import"./api-Bb4ObIZy.js";const C=()=>{const{t}=h(),{id:o}=p(),r=g(),{user:n}=x(),[a,c]=i.useState(null),[u,l]=i.useState(!1);i.useEffect(()=>{d()},[o]);const d=async()=>{try{const s=await f(o);c(s)}catch{}},m=async s=>{if(s.preventDefault(),(n==null?void 0:n.role)!=="admin"){alert(t("admin_update_alert"));return}try{await b(o,a),l(!1),alert(t("client_update_success"))}catch{alert(t("client_update_failed"))}};return a?e.jsxs("div",{className:"max-w-2xl mx-auto mt-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:t("client_details")}),u?e.jsxs("form",{onSubmit:m,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"name",children:t("name")}),e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"name",type:"text",value:a.name,onChange:s=>c({...a,name:s.target.value})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"submit",children:t("save_changes")}),e.jsx("button",{className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"button",onClick:()=>l(!1),children:t("cancel")})]})]}):e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsxs("strong",{children:[t("name"),":"]})," ",a.name]}),(n==null?void 0:n.role)==="admin"&&e.jsx("button",{className:"mt-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",onClick:()=>l(!0),children:t("edit")})]}),e.jsx("button",{className:"mt-4 bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",onClick:()=>r("/clients"),children:t("back_to_clients")})]}):e.jsx("div",{children:t("loading")})};export{C as default};
