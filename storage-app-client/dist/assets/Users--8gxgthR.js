import{u as m,j as e,a as y,i as h}from"./index-DSTbHML1.js";import{r as o}from"./vendor-8AKiDlQN.js";import{L as u}from"./router-BmsaeIqg.js";import{P as j}from"./Pagination-Dbv8puVG.js";import{t as v,d as b,a as N}from"./usersService--1COgLA-.js";import"./api-BqC8VQ1e.js";const w=({onFilterChange:d})=>{const{t:i}=m(),[l,s]=o.useState(""),[a,n]=o.useState(""),[x,g]=o.useState(""),t=r=>{r.preventDefault(),d({name:l,email:a,role:x})};return e.jsx("form",{onSubmit:t,className:"mb-4",children:e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("input",{type:"text",placeholder:i("filter_by_name"),value:l,onChange:r=>s(r.target.value),className:"border rounded px-2 py-1"}),e.jsx("input",{type:"text",placeholder:i("filter_by_email"),value:a,onChange:r=>n(r.target.value),className:"border rounded px-2 py-1"}),e.jsxs("select",{value:x,onChange:r=>g(r.target.value),className:"border rounded px-2 py-1",children:[e.jsx("option",{value:"",children:i("all_roles")}),e.jsx("option",{value:"admin",children:i("admin")}),e.jsx("option",{value:"user",children:i("user")})]}),e.jsx("button",{type:"submit",className:"bg-indigo-600 text-white px-4 py-1 rounded hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:i("apply_filters")})]})})},_=({users:d,onUserDeleted:i,onUserUpdated:l})=>{const{t:s}=m(),{user:a}=y(),{showFlashMessage:n}=h(),x=async t=>{if(window.confirm(s("confirm_delete_user")))try{await b(t),i==null||i(t),n(s("user_deleted_successfully"),"success")}catch(r){console.error("Error deleting user:",r),n(s("error_deleting_user"),"error")}},g=async t=>{try{const r=await v(t);n(r.msg,"success"),l==null||l()}catch(r){console.error("Error toggling user status:",r),n(s("error_toggling_user_status"),"error")}};return e.jsx("div",{className:"overflow-x-auto relative",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s("name")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s("email")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s("role")}),(a==null?void 0:a.role)==="admin"&&e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s("hourly_cost")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s("status")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider sticky right-0 bg-gray-50 shadow-l",children:s("actions")})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map((t,r)=>{var p;return e.jsxs("tr",{className:`${r%2===0?"bg-white":"bg-gray-50"} ${t.is_active===!1?"opacity-60":""}`,children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(a==null?void 0:a.role)==="admin"?e.jsx(u,{to:`/users/${t._id}`,className:`${t.is_active===!1?"text-gray-500":"text-indigo-600 hover:text-indigo-900"}`,children:t.name}):e.jsx("span",{className:t.is_active===!1?"text-gray-500":"",children:t.name})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:t.is_active===!1?"text-gray-500":"",children:t.email})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${t.role==="admin"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"} ${t.is_active===!1?"opacity-50":""}`,children:t.role})}),(a==null?void 0:a.role)==="admin"&&e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:t.is_active===!1?"text-gray-500":"text-gray-900",children:["â‚¬",((p=t.hourly_cost)==null?void 0:p.toFixed(2))||"0.00"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${t.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t.is_active?s("active"):s("inactive")})}),e.jsx("td",{className:`px-6 py-4 whitespace-nowrap sticky right-0 shadow-l ${r%2===0?"bg-white":"bg-gray-50"}`,children:(a==null?void 0:a.role)==="admin"&&t._id!==a._id&&e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>g(t._id),className:`px-3 py-1 text-xs rounded ${t.is_active?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:t.is_active?s("deactivate"):s("activate")}),e.jsx("button",{onClick:()=>x(t._id),className:"text-red-600 hover:text-red-900 text-xs",children:s("delete")})]})})]},t._id)})})]})})},E=()=>{const{t:d}=m(),{showFlashMessage:i}=h(),[l,s]=o.useState([]),[a,n]=o.useState(1),[x,g]=o.useState(1),[t,r]=o.useState({name:"",email:"",role:""});o.useEffect(()=>{p()},[]);const p=async()=>{try{const c=await N(a,t);s(c.users),g(c.totalPages)}catch(c){i(typeof c=="string"?c:c.message,"error")}},f=c=>{r(c),n(1)};return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:d("users")}),e.jsx(u,{to:"/create-user",className:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:d("create_user")})]}),e.jsx(w,{onFilterChange:f}),e.jsx(_,{users:l,onUserDeleted:()=>p(),onUserUpdated:()=>p()}),e.jsx(j,{currentPage:a,totalPages:x,onPageChange:n})]})};export{E as default};
