import{u as p,a as b,j as e,L as g}from"./index-DSTbHML1.js";import{r as i}from"./vendor-8AKiDlQN.js";import{b as f,u as y}from"./usersService--1COgLA-.js";import{c as j,u as v}from"./router-BmsaeIqg.js";import"./api-BqC8VQ1e.js";const F=()=>{var d;const{t:s}=p(),{id:n}=j(),c=v(),{user:a}=b(),[t,l]=i.useState(null),[u,r]=i.useState(!1);i.useEffect(()=>{m()},[n]);const m=async()=>{try{const o=await f(n);l(o)}catch(o){console.error(s("error_fetching_user"),o)}},h=async o=>{if(o.preventDefault(),(a==null?void 0:a.role)!=="admin"){alert(s("admin_only_message"));return}try{await y(n,t),r(!1),alert(s("user_updated_successfully"))}catch(x){console.error(s("error_updating_user"),x),alert(s("failed_to_update_user"))}};return t?e.jsxs("div",{className:"max-w-2xl mx-auto mt-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:s("user_details")}),u?e.jsxs("form",{onSubmit:h,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"name",children:s("name")}),e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"name",type:"text",value:t.name,onChange:o=>l({...t,name:o.target.value})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"email",children:s("email")}),e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"email",type:"email",value:t.email,onChange:o=>l({...t,email:o.target.value})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"role",children:s("role")}),e.jsxs("select",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"role",value:t.role,onChange:o=>l({...t,role:o.target.value}),children:[e.jsx("option",{value:"user",children:s("user")}),e.jsx("option",{value:"admin",children:s("admin")})]})]}),(a==null?void 0:a.role)==="admin"&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"hourly_cost",children:[s("hourly_cost")," (€)"]}),e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"hourly_cost",type:"number",min:"0",step:"0.01",value:t.hourly_cost||0,onChange:o=>l({...t,hourly_cost:parseFloat(o.target.value)||0}),placeholder:"0.00"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s("hourly_cost_description")})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"submit",children:s("save_changes")}),e.jsx("button",{className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"button",onClick:()=>r(!1),children:s("cancel")})]})]}):e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsxs("strong",{children:[s("name"),":"]})," ",t.name]}),e.jsxs("p",{children:[e.jsxs("strong",{children:[s("email"),":"]})," ",t.email]}),e.jsxs("p",{children:[e.jsxs("strong",{children:[s("role"),":"]})," ",t.role]}),(a==null?void 0:a.role)==="admin"&&e.jsxs("p",{children:[e.jsxs("strong",{children:[s("hourly_cost"),":"]})," €",((d=t.hourly_cost)==null?void 0:d.toFixed(2))||"0.00"]}),(a==null?void 0:a.role)==="admin"&&e.jsx("button",{className:"mt-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",onClick:()=>r(!0),children:s("edit")})]}),e.jsx("button",{className:"mt-4 bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",onClick:()=>c("/users"),children:s("back_to_users")})]}):e.jsx(g,{})};export{F as default};
