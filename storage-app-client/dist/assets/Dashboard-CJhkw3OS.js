import{u as _,a as k,j as e,L as C,F as v,b,c as g,d as u,e as h,f as P,g as R,h as S}from"./index-DSTbHML1.js";import{r as d}from"./vendor-8AKiDlQN.js";import{L as o}from"./router-BmsaeIqg.js";import{g as F}from"./clientService-qRF0PNhS.js";import{g as W}from"./productsService-BwLSiUTT.js";import{g as $}from"./reportService-CsvEZGDr.js";import{g as L}from"./usersService--1COgLA-.js";import{g as E}from"./worksiteService-DblhuvHv.js";import"./api-BqC8VQ1e.js";const z=()=>{const{t:s}=_(),{user:r}=k(),[t,a]=d.useState({clients:0,users:{total:0,adminCount:0,userCount:0,adminPercentage:0,userPercentage:0},products:{total:0,materialCount:0,productCount:0,materialPercentage:0,productPercentage:0,supplierCount:0,averagePrice:0,vat10Count:0,vat22Count:0,vat10Percentage:0,vat22Percentage:0},worksites:{totalWorksites:0,activeWorksites:0,inactiveWorksites:0},reports:{totalReports:0,pendingReports:0,completedReports:0}}),[n,l]=d.useState(!0),[i,p]=d.useState(null);d.useEffect(()=>{r&&j()},[r]);const j=async()=>{l(!0);try{const[m,N,f,y,w]=await Promise.all([F(),L(),W(),E(),$()]);a({clients:m.count,users:N,products:f,worksites:y,reports:w}),p(null)}catch(m){p(s("error_fetching_stats")),console.error("Error fetching dashboard stats:",m)}finally{l(!1)}};return n?e.jsx("div",{className:"min-h-screen bg-gradient-to-br flex items-center justify-center",children:e.jsx(C,{})}):i?e.jsx("div",{className:"min-h-screen bg-gradient-to-br flex items-center justify-center",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 text-center",children:[e.jsx(v,{className:"text-red-500 text-4xl mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:s("error")}),e.jsx("p",{className:"text-gray-600",children:i})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br  ",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:[s("dashboard")," ðŸ“Š"]}),e.jsxs("p",{className:"text-lg text-gray-600",children:[s("welcome_back"),", ",r==null?void 0:r.name,"! ",s("here_your_overview")]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(c,{icon:b,title:s("total_clients"),value:t.clients,color:"blue",link:"/clients",linkText:s("view_clients")}),e.jsx(c,{icon:g,title:s("total_reports"),value:t.reports.totalReports,color:"green",link:"/report-list",linkText:s("view_reports")}),e.jsx(c,{icon:u,title:s("active_worksites"),value:t.worksites.activeWorksites,color:"purple",link:"/worksites",linkText:s("view_worksites")}),e.jsx(c,{icon:h,title:s("total_products"),value:t.products.total,color:"orange",link:"/products",linkText:s("view_products")})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 p-6 hover:shadow-lg hover:border-gray-200 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center",children:[e.jsx(g,{className:"text-green-500 mr-3"}),s("reports_overview")]}),e.jsxs(o,{to:"/reports",className:"text-green-600 hover:text-green-700 text-sm font-medium",children:[s("view_all")," â†’"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:t.reports.totalReports}),e.jsx("div",{className:"text-sm text-gray-600",children:s("total")})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:t.reports.pendingReports}),e.jsx("div",{className:"text-sm text-gray-600",children:s("pending")})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.reports.completedReports}),e.jsx("div",{className:"text-sm text-gray-600",children:s("completed")})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"bg-green-500 h-3 rounded-full transition-all duration-500",style:{width:`${t.reports.totalReports>0?t.reports.completedReports/t.reports.totalReports*100:0}%`}})}),e.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[s("completion_rate"),":"," ",t.reports.totalReports>0?Math.round(t.reports.completedReports/t.reports.totalReports*100):0,"%"]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 p-6 hover:shadow-lg hover:border-gray-200 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center",children:[e.jsx(P,{className:"text-blue-500 mr-3"}),s("users_overview")]}),e.jsxs(o,{to:"/users",className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:[s("view_all")," â†’"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.users.adminCount}),e.jsx("div",{className:"text-sm text-gray-600",children:s("admins")})]}),e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-600",children:t.users.userCount}),e.jsx("div",{className:"text-sm text-gray-600",children:s("users")})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"bg-blue-500 h-3 rounded-full transition-all duration-500",style:{width:`${t.users.adminPercentage}%`}})}),e.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[s("admin_ratio"),": ",t.users.adminPercentage,"% ",s("admins"),","," ",t.users.userPercentage,"% ",s("users")]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 p-6 hover:shadow-lg hover:border-gray-200 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center",children:[e.jsx(u,{className:"text-purple-500 mr-3"}),s("worksites_status")]}),e.jsxs(o,{to:"/worksites",className:"text-purple-600 hover:text-purple-700 text-sm font-medium",children:[s("view_all")," â†’"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{className:"text-green-500 mr-3"}),e.jsx("span",{className:"text-gray-700",children:s("active_worksites")})]}),e.jsx("span",{className:"text-2xl font-bold text-green-600",children:t.worksites.activeWorksites})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-red-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(v,{className:"text-red-500 mr-3"}),e.jsx("span",{className:"text-gray-700",children:s("inactive_worksites")})]}),e.jsx("span",{className:"text-2xl font-bold text-red-600",children:t.worksites.inactiveWorksites})]})]}),e.jsxs("div",{className:"mt-4 text-sm text-gray-600",children:[s("total_worksites"),": ",t.worksites.totalWorksites]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 p-6 hover:shadow-lg hover:border-gray-200 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center",children:[e.jsx(h,{className:"text-orange-500 mr-3"}),s("products_breakdown")]}),e.jsxs(o,{to:"/products",className:"text-orange-600 hover:text-orange-700 text-sm font-medium",children:[s("view_all")," â†’"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:t.products.vat10Count}),e.jsx("div",{className:"text-sm text-gray-600",children:s("vat_10_percent")})]}),e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-600",children:t.products.vat22Count}),e.jsx("div",{className:"text-sm text-gray-600",children:s("vat_22_percent")})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"bg-orange-500 h-3 rounded-full transition-all duration-500",style:{width:`${t.products.vat10Percentage}%`}})}),e.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[s("vat_10_percent"),": ",t.products.vat10Percentage,"%,"," ",s("vat_22_percent"),": ",t.products.vat22Percentage,"%"]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[s("total_suppliers"),":"]}),e.jsx("span",{className:"font-semibold",children:t.products.supplierCount})]}),e.jsxs("div",{className:"flex justify-between mt-1",children:[e.jsxs("span",{children:[s("average_price"),":"]}),e.jsxs("span",{className:"font-semibold",children:["â‚¬",t.products.averagePrice]})]})]})})]})]}),e.jsxs("div",{className:"mt-8 bg-white rounded-xl shadow-md border border-gray-100 p-6 hover:shadow-lg hover:border-gray-200 transition-all duration-300",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-800 mb-6 flex items-center",children:[e.jsx(S,{className:"text-indigo-500 mr-3"}),s("quick_actions")]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(x,{title:s("create_report"),description:s("create_new_report"),icon:g,color:"green",link:"/report-create"}),e.jsx(x,{title:s("add_client"),description:s("add_new_client"),icon:b,color:"blue",link:"/create-client"}),e.jsx(x,{title:s("add_worksite"),description:s("add_new_worksite"),icon:u,color:"purple",link:"/worksites/create"}),e.jsx(x,{title:s("add_product"),description:s("add_new_product"),icon:h,color:"orange",link:"/create-product"})]})]})]})})},c=({icon:s,title:r,value:t,color:a,link:n,linkText:l})=>{const i={blue:"bg-blue-500 text-blue-600",green:"bg-green-500 text-green-600",purple:"bg-purple-500 text-purple-600",orange:"bg-orange-500 text-orange-600"};return e.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 p-6 hover:shadow-lg hover:border-gray-200 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`p-3 rounded-lg ${i[a]} bg-opacity-10`,children:e.jsx(s,{className:`text-2xl ${i[a].split(" ")[1]}`})}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-3xl font-bold text-gray-900",children:t}),e.jsx("div",{className:"text-sm text-gray-600",children:r})]})]}),e.jsxs(o,{to:n,className:`inline-flex items-center text-sm font-medium ${i[a].split(" ")[1]} hover:opacity-80 transition-opacity`,children:[l," â†’"]})]})},x=({title:s,description:r,icon:t,color:a,link:n})=>{const l={blue:"bg-blue-500 text-blue-600",green:"bg-green-500 text-green-600",purple:"bg-purple-500 text-purple-600",orange:"bg-orange-500 text-orange-600"};return e.jsxs(o,{to:n,className:"block p-4 border border-gray-200 rounded-lg hover:border-gray-300 hover:shadow-md hover:bg-gray-50 transition-all duration-200",children:[e.jsx("div",{className:`inline-flex p-3 rounded-lg ${l[a]} bg-opacity-10 mb-3`,children:e.jsx(t,{className:`text-xl ${l[a].split(" ")[1]}`})}),e.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:s}),e.jsx("p",{className:"text-sm text-gray-600",children:r})]})};export{z as default};
